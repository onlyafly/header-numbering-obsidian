/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

function getActiveView(app) {
    const activeView = app.workspace.getActiveViewOfType(obsidian.MarkdownView);
    return activeView !== null && activeView !== void 0 ? activeView : undefined;
}
function isViewActive(app) {
    const activeView = getActiveView(app);
    if (activeView && activeView.file)
        return true;
    return false;
}
function getViewMetadata(app) {
    const activeView = getActiveView(app);
    if (activeView && activeView.file) {
        const data = app.metadataCache.getFileCache(activeView.file) || {};
        return data;
    }
    return undefined;
}
function getViewInfo(app) {
    const activeView = getActiveView(app);
    const data = getViewMetadata(app);
    const editor = activeView ? activeView.editor : undefined;
    if (activeView && data && editor) {
        return {
            activeView, data, editor
        };
    }
    return undefined;
}

const roman_map = {
  M: 1000,
  CM: 900,
  D: 500,
  CD: 400,
  C: 100,
  XC: 90,
  L: 50,
  XL: 40,
  X: 10,
  IX: 9,
  V: 5,
  IV: 4,
  I: 1
};

const allChars = Object.keys(roman_map);
const allNumerals = Object.values(roman_map);
const romanPattern =
  /^(M{1,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|M{0,4}(CM|C?D|D?C{1,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})|M{0,4}(CM|CD|D?C{0,3})(XC|X?L|L?X{1,3})(IX|IV|V?I{0,3})|M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|I?V|V?I{1,3}))$/;

const romanize = (decimal) => {
  if (
    decimal <= 0 ||
    typeof decimal !== 'number' ||
    Math.floor(decimal) !== decimal
  ) {
    throw new Error('requires an unsigned integer')
  }
  if (decimal >= 4000) {
    throw new Error('requires max value of less than 3999 or less')
  }
  let roman = '';
  for (let i = 0; i < allChars.length; i++) {
    while (decimal >= allNumerals[i]) {
      decimal -= allNumerals[i];
      roman += allChars[i];
    }
  }
  return roman
};

const deromanize = (romanStr) => {
  if (typeof romanStr !== 'string') {
    throw new Error('requires a string')
  }
  if (!romanPattern.test(romanStr)) {
    throw new Error('requires valid roman numeral string')
  }
  let romanString = romanStr.toUpperCase();
  let arabic = 0;
  let iteration = romanString.length;
  while (iteration--) {
    let cumulative = roman_map[romanString[iteration]];
    if (cumulative < roman_map[romanString[iteration + 1]]) {
      arabic -= cumulative;
    } else {
      arabic += cumulative;
    }
  }
  return arabic
};

var romans = {
  deromanize,
  romanize,
  allChars,
  allNumerals
};

// Validates the string using a regex to ensure is is a valid arabic numbering value
function isValidArabicNumberingValueString(s) {
    const regex = /^[0-9]+$/;
    return regex.test(s);
}
// Validates the string using a regex to ensure is is a valid alphabet numbering value
function isValidAlphabetNumberingValueString(s) {
    const regex = /^[A-Z]$/;
    return regex.test(s);
}
// Validates the string using a regex to ensure is is a valid roman numbering value
function isValidRomanNumberingValueString(s) {
    const regex = /^[0IVXLCDM]+$/; // This includes zero for zeroth testing
    return regex.test(s);
}
function printableNumberingToken(t) {
    switch (t.style) {
        case '1':
            return t.value.toString();
        case 'A':
            return t.value;
        case 'I':
            return t.value;
    }
}
function zerothNumberingTokenInStyle(style) {
    switch (style) {
        case '1':
            return { style: '1', value: 0 };
        case 'A':
            return { style: 'A', value: 'Z' };
        case 'I':
            return { style: 'I', value: '0' };
    }
}
function firstNumberingTokenInStyle(style) {
    switch (style) {
        case '1':
            return { style: '1', value: 1 };
        case 'A':
            return { style: 'A', value: 'A' };
        case 'I':
            return { style: 'I', value: 'I' };
    }
}
function nextNumberingToken(t) {
    switch (t.style) {
        case '1':
            return { style: '1', value: t.value + 1 };
        case 'A':
            if (t.value === 'Z')
                return { style: 'A', value: 'A' };
            else
                return { style: 'A', value: String.fromCharCode(t.value.charCodeAt(0) + 1) };
        case 'I':
            if (t.value === '0')
                return { style: 'I', value: 'I' };
            else
                return { style: 'I', value: romans.romanize(romans.deromanize(t.value) + 1) };
    }
}
function previousNumberingToken(t) {
    switch (t.style) {
        case '1':
            return { style: '1', value: t.value - 1 };
        case 'A':
            if (t.value === 'A')
                return { style: 'A', value: 'Z' };
            else
                return { style: 'A', value: String.fromCharCode(t.value.charCodeAt(0) - 1) };
        case 'I':
            if (t.value === 'I')
                return { style: 'I', value: '0' };
            else
                return { style: 'I', value: romans.romanize(romans.deromanize(t.value) - 1) };
    }
}
function makeNumberingString(numberingStack) {
    let numberingString = '';
    for (let i = 0; i < numberingStack.length; i++) {
        if (i === 0) {
            numberingString += ' ';
        }
        else {
            numberingString += '.';
        }
        numberingString += printableNumberingToken(numberingStack[i]);
    }
    return numberingString;
}
function startAtOrZerothInStyle(startAtSettingString, style) {
    if (startAtSettingString === '')
        return zerothNumberingTokenInStyle(style);
    let firstNumberingTokenFromSetting;
    switch (style) {
        case '1':
            if (!isValidArabicNumberingValueString(startAtSettingString))
                return zerothNumberingTokenInStyle(style);
            firstNumberingTokenFromSetting = { style: '1', value: parseInt(startAtSettingString) };
            break;
        case 'A':
            if (!isValidAlphabetNumberingValueString(startAtSettingString))
                return zerothNumberingTokenInStyle(style);
            firstNumberingTokenFromSetting = { style: 'A', value: startAtSettingString };
            break;
        case 'I':
            if (!isValidRomanNumberingValueString(startAtSettingString))
                return zerothNumberingTokenInStyle(style);
            firstNumberingTokenFromSetting = { style: 'I', value: startAtSettingString };
            break;
    }
    // Convert the first numbering token to a zeroth numbering token
    return previousNumberingToken(firstNumberingTokenFromSetting);
}

const DEFAULT_SETTINGS = {
    skipTopLevel: false,
    firstLevel: 1,
    maxLevel: 6,
    styleLevel1: '1',
    styleLevelOther: '1',
    auto: false,
    separator: '',
    contents: '',
    skipHeadings: '',
    startAt: '',
    off: false
};
function isValidNumberingStyleString(s) {
    if (s === 'A' || s === '1' || s === 'I')
        return true;
    return false;
}
function isValidNumberingValueString(s) {
    if (s === '' || isValidArabicNumberingValueString(s) || isValidAlphabetNumberingValueString(s) || isValidRomanNumberingValueString(s))
        return true;
    return false;
}
function isValidFlag(f) {
    if (f === true || f === false)
        return true;
    return false;
}
function isValidFirstOrMaxLevel(x) {
    if (typeof x === 'number' && x >= 1 && x <= 6)
        return true;
    return false;
}
function isValidSeparator(x) {
    return typeof x === 'string' &&
        (x === '' ||
            x === ':' || x === ' :' ||
            x === '.' || x === ' .' ||
            x === '-' || x === ' -' ||
            x === '—' || x === ' —' || /* em-dash */
            x === ')' || x === ' )');
}
function isValidBlockIdSetting(x) {
    if (typeof x === 'string' && (x === '' || x.startsWith('^')))
        return true;
    return false;
}
function isNonEmptyBlockId(x) {
    if (x.length > 2 && x.startsWith('^'))
        return true;
    return false;
}

function createSupportFlagsFromSettings(styleLevel1, styleLevelOther) {
    return {
        alphabet: styleLevel1 === 'A' || styleLevelOther === 'A',
        roman: styleLevel1 === 'I' || styleLevelOther === 'I'
    };
}
// Get the regex for the header string, based on the support flags. The generated regex is used to find the range of the header prefix.
// The regex is generated dynamically, because the regex is different depending on the support flags.
function getRegexForHeaderString(flags) {
    if (flags.alphabet && flags.roman) {
        // Regex to match the heading prefix, including the space after the hash(es), but not the heading text
        return /^\s{0,4}#+( )?([0-9]+\.|[A-Z]\.|[IVXLCDM]+\.)*([0-9]+|[A-Z]|[IVXLCDM]+)?( )?[)—:.-]?( )+/g;
    }
    else if (!flags.alphabet && flags.roman) {
        // Regex to match the heading prefix, including the space after the hash(es), but not the heading text
        return /^\s{0,4}#+( )?([0-9]+\.|[IVXLCDM]+\.)*([0-9]+|[IVXLCDM]+)?( )?[)—:.-]?( )+/g;
    }
    else if (flags.alphabet && !flags.roman) {
        // Regex to match the heading prefix, including the space after the hash(es), but not the heading text
        return /^\s{0,4}#+( )?([0-9]+\.|[A-Z]\.)*([0-9]+|[A-Z])?( )?[)—:.-]?( )+/g;
    }
    else if (!flags.alphabet && !flags.roman) {
        // Regex to match the heading prefix, including the space after the hash(es), but not the heading text
        return /^\s{0,4}#+( )?([0-9]+\.)*([0-9]+)?( )?[)—:.-]?( )+/g;
    }
    throw new Error('Unexpected combination of support flags');
}
// Find the range of the heading prefix, including the space after any numbering, but not the heading text
function findRangeInHeaderString(lineText, lineNumber, flags) {
    const regex = getRegexForHeaderString(flags);
    if (!lineText)
        return undefined;
    const matches = lineText.match(regex);
    if (matches && matches.length !== 1) {
        // eslint-disable-next-line no-console
        console.log("Unexpected heading format: '" + lineText + "'");
        return undefined;
    }
    const match = matches ? matches[0] : '';
    const from = {
        line: lineNumber,
        ch: 0
    };
    const to = {
        line: lineNumber,
        ch: match.length
    };
    return { from, to };
}
function updateSettingsFromFrontMatterFormatPart(part, settings) {
    // Parse the separator
    let partWithoutSeparator = part;
    const potentialTwoCharSeparator = part.slice(-2);
    if (isValidSeparator(potentialTwoCharSeparator)) {
        settings.separator = potentialTwoCharSeparator;
        partWithoutSeparator = part.slice(0, -2);
    }
    else {
        const potentialOneCharSeparator = part.slice(-1);
        if (isValidSeparator(potentialOneCharSeparator)) {
            settings.separator = potentialOneCharSeparator;
            partWithoutSeparator = part.slice(0, -1);
        }
        else {
            settings.separator = '';
        }
    }
    // Parse the numbering style
    const descriptors = partWithoutSeparator.split('.');
    let firstNumberedDescriptor = 0;
    // Handle the case where the first descriptor is an underscore
    if (descriptors.length > 1 && descriptors[0] === '_') {
        // The first descriptor is an instruction to skip top levels, so skip them
        settings.skipTopLevel = true;
        firstNumberedDescriptor = 1;
    }
    else {
        settings.skipTopLevel = false;
    }
    if (descriptors.length - firstNumberedDescriptor >= 2) {
        const styleLevel1 = descriptors[firstNumberedDescriptor];
        if (isValidNumberingStyleString(styleLevel1)) {
            settings.styleLevel1 = styleLevel1;
        }
        const styleLevelOther = descriptors[firstNumberedDescriptor + 1];
        if (isValidNumberingStyleString(styleLevelOther)) {
            settings.styleLevelOther = styleLevelOther;
        }
    }
    return settings;
}

const AUTO_PART_KEY = 'auto';
const FIRST_LEVEL_PART_KEY = 'first-level';
const MAX_LEVEL_PART_KEY = 'max';
const CONTENTS_PART_KEY = 'contents';
const SKIP_PART_KEY = 'skip';
const START_AT_PART_KEY = 'start-at';
const OFF_PART_KEY = 'off';
function parseCompactFrontMatterSettings(fm) {
    const entry = obsidian.parseFrontMatterEntry(fm, 'number headings');
    if (entry) {
        const entryString = String(entry);
        const parts = entryString.split(',');
        let settings = Object.assign({}, DEFAULT_SETTINGS);
        for (const part of parts) {
            const trimmedPart = part.trim();
            if (trimmedPart.length === 0)
                continue;
            if (trimmedPart === OFF_PART_KEY) {
                // Parse off part
                settings.off = true;
            }
            else if (trimmedPart === AUTO_PART_KEY) {
                // Parse auto numbering part
                settings.auto = true;
            }
            else if (trimmedPart.startsWith(FIRST_LEVEL_PART_KEY)) {
                // Parse first level part
                const nstring = trimmedPart.substring(FIRST_LEVEL_PART_KEY.length + 1);
                const n = parseInt(nstring);
                if (isValidFirstOrMaxLevel(n)) {
                    settings.firstLevel = n;
                }
            }
            else if (trimmedPart.startsWith(MAX_LEVEL_PART_KEY)) {
                // Parse max level part
                const nstring = trimmedPart.substring(MAX_LEVEL_PART_KEY.length + 1);
                const n = parseInt(nstring);
                if (isValidFirstOrMaxLevel(n)) {
                    settings.maxLevel = n;
                }
            }
            else if (trimmedPart.startsWith(START_AT_PART_KEY)) {
                // Parse "start at" part
                const value = trimmedPart.substring(START_AT_PART_KEY.length + 1);
                if (isValidNumberingValueString(value)) {
                    settings.startAt = value;
                }
            }
            else if (trimmedPart.startsWith(CONTENTS_PART_KEY)) {
                if (trimmedPart.length <= CONTENTS_PART_KEY.length + 1)
                    continue;
                // Parse contents heading part
                const tocHeadingBlockIdName = trimmedPart.substring(CONTENTS_PART_KEY.length + 1);
                if (isValidBlockIdSetting(tocHeadingBlockIdName)) {
                    settings.contents = tocHeadingBlockIdName;
                }
            }
            else if (trimmedPart.startsWith(SKIP_PART_KEY)) {
                if (trimmedPart.length <= SKIP_PART_KEY.length + 1)
                    continue;
                // Parse skip heading part
                const skipHeadingBlockIdName = trimmedPart.substring(SKIP_PART_KEY.length + 1);
                if (isValidBlockIdSetting(skipHeadingBlockIdName)) {
                    settings.skipHeadings = skipHeadingBlockIdName;
                }
            }
            else {
                // Parse formatting part
                settings = updateSettingsFromFrontMatterFormatPart(trimmedPart, settings);
            }
        }
        return settings;
    }
    return undefined;
}
const getFrontMatterSettingsOrAlternative = ({ frontmatter }, alternativeSettings) => {
    var _a, _b, _c, _d, _e;
    if (frontmatter !== undefined) {
        const decompactedSettings = parseCompactFrontMatterSettings(frontmatter);
        if (decompactedSettings !== undefined)
            return decompactedSettings;
        // NOTE: Everything below is for backwards compatibility only
        const skipTopLevelEntry = (_a = obsidian.parseFrontMatterEntry(frontmatter, 'number-headings-skip-top-level')) !== null && _a !== void 0 ? _a : obsidian.parseFrontMatterEntry(frontmatter, 'header-numbering-skip-top-level');
        const skipTopLevel = isValidFlag(skipTopLevelEntry) ? skipTopLevelEntry : alternativeSettings.skipTopLevel;
        const maxLevelEntry = (_b = obsidian.parseFrontMatterEntry(frontmatter, 'number-headings-max-level')) !== null && _b !== void 0 ? _b : obsidian.parseFrontMatterEntry(frontmatter, 'header-numbering-max-level');
        const maxLevel = isValidFirstOrMaxLevel(maxLevelEntry) ? maxLevelEntry : alternativeSettings.maxLevel;
        const styleLevel1Entry = String((_c = obsidian.parseFrontMatterEntry(frontmatter, 'number-headings-style-level-1')) !== null && _c !== void 0 ? _c : obsidian.parseFrontMatterEntry(frontmatter, 'header-numbering-style-level-1'));
        const styleLevel1 = isValidNumberingStyleString(styleLevel1Entry) ? styleLevel1Entry : alternativeSettings.styleLevel1;
        const styleLevelOtherEntry = String((_d = obsidian.parseFrontMatterEntry(frontmatter, 'number-headings-style-level-other')) !== null && _d !== void 0 ? _d : obsidian.parseFrontMatterEntry(frontmatter, 'header-numbering-style-level-other'));
        const styleLevelOther = isValidNumberingStyleString(styleLevelOtherEntry) ? styleLevelOtherEntry : alternativeSettings.styleLevelOther;
        const autoEntry = (_e = obsidian.parseFrontMatterEntry(frontmatter, 'number-headings-auto')) !== null && _e !== void 0 ? _e : obsidian.parseFrontMatterEntry(frontmatter, 'header-numbering-auto');
        const auto = isValidFlag(autoEntry) ? autoEntry : alternativeSettings.auto;
        return Object.assign(Object.assign({}, alternativeSettings), { skipTopLevel, maxLevel, styleLevel1, styleLevelOther, auto });
    }
    else {
        return alternativeSettings;
    }
};
function settingsToCompactFrontMatterValue(settings) {
    if (settings.off)
        return OFF_PART_KEY;
    const autoPart = settings.auto ? 'auto, ' : '';
    const firstLevelPart = `first-level ${settings.firstLevel}, `;
    const maxPart = `max ${settings.maxLevel}, `;
    const contentsPart = settings.contents && settings.contents.length > 0 ? `contents ${settings.contents}, ` : '';
    const skipHeadingsPart = settings.skipHeadings && settings.skipHeadings.length > 0 ? `skip ${settings.skipHeadings}, ` : '';
    const skipTopLevelString = settings.skipTopLevel ? '_.' : '';
    const stylePart = `${skipTopLevelString}${settings.styleLevel1}.${settings.styleLevelOther}${settings.separator}`;
    const startAtPart = settings.startAt !== '' ? `start-at ${settings.startAt}, ` : '';
    return autoPart + firstLevelPart + maxPart + contentsPart + skipHeadingsPart + startAtPart + stylePart;
}
const saveSettingsToFrontMatter = (fileManager, file, settings) => {
    fileManager.processFrontMatter(file, frontmatter => {
        const v = settingsToCompactFrontMatterValue(settings);
        frontmatter['number headings'] = v;
    });
};

class NumberingDoneModal extends obsidian.Modal {
    constructor(app, config) {
        super(app);
        this.config = config;
    }
    onOpen() {
        const { contentEl, titleEl } = this;
        titleEl.setText('Number Headings - Successfully Completed');
        contentEl.createEl('div', { text: this.config.message });
        contentEl.createEl('pre', { text: this.config.preformattedMessage });
        contentEl.createEl('div', { text: "Do you want to save these settings in the document's front matter?", cls: 'number-headings-question' });
        const containerForButtons = contentEl.createEl('div', { cls: 'number-headings-button-container' });
        const noButton = containerForButtons.createEl('button', {});
        noButton.setText('No');
        noButton.onClickEvent((ev) => {
            this.close();
            return ev;
        });
        const yesButton = containerForButtons.createEl('button', {});
        yesButton.setText('Yes, save settings in document');
        yesButton.onClickEvent((ev) => {
            this.config.saveSettingsCallback(false);
            this.close();
            return ev;
        });
        const yesAndAutoButton = containerForButtons.createEl('button', {});
        yesAndAutoButton.setText('Yes, save settings in document, and automatically number');
        yesAndAutoButton.onClickEvent((ev) => {
            this.config.saveSettingsCallback(true);
            this.close();
            return ev;
        });
    }
    onClose() {
        const { contentEl, titleEl } = this;
        contentEl.empty();
        titleEl.empty();
    }
}
function showNumberingDoneMessage(app, settings) {
    const saveSettingsCallback = (shouldAddAutoFlag) => {
        const tweakedSettings = Object.assign({}, settings);
        if (shouldAddAutoFlag)
            tweakedSettings.auto = true;
        const file = app.workspace.getActiveFile();
        if (file) {
            saveSettingsToFrontMatter(app.fileManager, file, tweakedSettings);
        }
    };
    const config = {
        message: `Successfully updated all heading numbers in the document, using the settings below. 
      See settings panel to change how headings are numbered, or use front matter
      (see settings panel).`,
        preformattedMessage: `Skip top heading level: ${settings.skipTopLevel}
First heading level: ${settings.firstLevel}
Start numbering first heading at: ${settings.startAt}
Maximum heading level: ${settings.maxLevel}
Style for level 1 headings: ${settings.styleLevel1}
Style for lower level headings (below level 1): ${settings.styleLevelOther}
Separator: ${settings.separator}
Table of Contents Anchor: ${settings.contents}
Skip Headings Anchor: ${settings.skipHeadings}`,
        saveSettingsCallback
    };
    const leaf = app.workspace.activeLeaf;
    if (leaf) {
        new NumberingDoneModal(app, config).open();
    }
}

const TOC_LIST_ITEM_BULLET = '-';
function makeHeadingHashString(editor, heading) {
    const regex = /^\s{0,4}#+/g;
    const headingLineString = editor.getLine(heading.position.start.line);
    if (!headingLineString)
        return undefined;
    const matches = headingLineString.match(regex);
    if (!matches)
        return undefined;
    if (matches.length !== 1) {
        // eslint-disable-next-line no-console
        console.log("Unexpected heading format: '" + headingLineString + "'");
        return undefined;
    }
    const match = matches[0];
    return match.trimLeft();
}
function findHeadingPrefixRange(editor, heading, flags) {
    const lineNumber = heading.position.start.line;
    const lineText = editor.getLine(lineNumber);
    return findRangeInHeaderString(lineText, lineNumber, flags);
}
function cleanHeadingTextForToc(htext) {
    if (htext.contains('^')) {
        const x = htext.split('^');
        if (x.length > 1) {
            return x[0].trim();
        }
    }
    return htext.trim();
}
function cleanWikiLink(newText, use_display_text) {
    if (newText.startsWith('[[') && newText.endsWith(']]')) {
        newText = newText.replace('[[', '');
        newText = newText.replace(']]', '');
        // If the link has display text use that.
        console.log('hello');
    }
    return newText;
}
function parseHeaderText(htext) {
    let stringArray = [];
    let linkText = "";
    let displayText = "";
    // store the generated heading number
    let i = htext.split(' ');
    if (i.length > 1) {
        stringArray.push(i.shift());
    }
    htext = i.join(' ');
    linkText = cleanWikiLink(htext);
    if (linkText.contains('|')) {
        const j = linkText.split('|');
        linkText = linkText.replace('|', ' ');
        displayText = j[1];
    }
    else {
        displayText = linkText;
    }
    if (linkText.contains('#')) {
        linkText = linkText.replace('#', ' ');
    }
    if (displayText.contains('#')) {
        displayText = displayText.replace('#', ' > ');
    }
    let k = linkText.split(' ');
    stringArray = stringArray.concat(k);
    linkText = stringArray.join(' ');
    return {
        text: cleanHeadingTextForToc(linkText),
        cleanText: cleanHeadingTextForToc(displayText)
    };
}
// eslint-disable-next-line @typescript-eslint/no-unused-vars
function createTocEntry(h, settings, initialHeadingLevel) {
    // Check that h.heading is a link in [[]] format.
    const headerText = parseHeaderText(h.heading);
    let bulletIndent = '';
    const startLevel = initialHeadingLevel;
    for (let i = startLevel; i < h.level; i++) {
        bulletIndent += '\t';
    }
    const entryLink = `[[#${headerText.text}|${headerText.cleanText}]]`;
    return bulletIndent + TOC_LIST_ITEM_BULLET + ' ' + entryLink;
}
// Replace a range, but only if there is a change in text, to prevent poluting the undo stack
function replaceRangeEconomically(editor, changes, range, text) {
    const previousText = editor.getRange(range.from, range.to);
    if (previousText !== text) {
        changes.push({
            text: text,
            from: range.from,
            to: range.to
        });
    }
}
const updateHeadingNumbering = (viewInfo, settings) => {
    var _a;
    if (!viewInfo)
        return;
    const headings = (_a = viewInfo.data.headings) !== null && _a !== void 0 ? _a : [];
    const editor = viewInfo.editor;
    const supportFlags = createSupportFlagsFromSettings(settings.styleLevel1, settings.styleLevelOther);
    let previousLevel = 1;
    let numberingStack = [startAtOrZerothInStyle(settings.startAt, settings.styleLevel1)];
    if (settings.firstLevel > 1) {
        previousLevel = settings.firstLevel;
    }
    else if (settings.skipTopLevel) {
        previousLevel = 2;
    }
    const changes = [];
    for (const heading of headings) {
        // Update the numbering stack based on the level and previous level
        const level = heading.level;
        // Handle skipped & ignored levels.
        if ((settings.firstLevel > level) || (settings.skipTopLevel && level === 1)) {
            // Resets the numbering when a level is skipped.
            // Note: This leaves headings as they are, allowing people to have numbers at the start of
            // ignored headings.
            numberingStack = [startAtOrZerothInStyle(settings.startAt, settings.styleLevel1)];
            if (settings.firstLevel > 1) {
                previousLevel = settings.firstLevel;
            }
            else if (settings.skipTopLevel) {
                previousLevel = 2;
            }
            continue;
        }
        // Handle skipped headings
        if (settings.skipHeadings.length > 0) {
            if (heading.heading.endsWith(settings.skipHeadings)) {
                continue;
            }
        }
        // Adjust numbering stack
        if (level === previousLevel) {
            const x = numberingStack.pop();
            if (x !== undefined) {
                numberingStack.push(nextNumberingToken(x));
            }
        }
        else if (level < previousLevel) {
            for (let i = previousLevel; i > level; i--) {
                numberingStack.pop();
            }
            const x = numberingStack.pop();
            if (x !== undefined) {
                numberingStack.push(nextNumberingToken(x));
            }
        }
        else if (level > previousLevel) {
            for (let i = previousLevel; i < level; i++) {
                numberingStack.push(firstNumberingTokenInStyle(settings.styleLevelOther));
            }
        }
        // Set the previous level to this level for the next iteration
        previousLevel = level;
        if (level > settings.maxLevel) {
            // If we are above the max level, just don't number it
            continue;
        }
        // Find the range to replace, and then do it
        const prefixRange = findHeadingPrefixRange(editor, heading, supportFlags);
        if (prefixRange === undefined)
            return;
        const headingHashString = makeHeadingHashString(editor, heading);
        if (headingHashString === undefined)
            return;
        const prefixString = makeNumberingString(numberingStack);
        replaceRangeEconomically(editor, changes, prefixRange, headingHashString + prefixString + settings.separator + ' ');
    }
    // Execute the transaction to make all the changes at once
    if (changes.length > 0) {
        // eslint-disable-next-line no-console
        console.log('Number Headings Plugin: Applying headings numbering changes:', changes.length);
        editor.transaction({
            changes: changes
        });
    }
};
const updateTableOfContents = (viewInfo, settings) => {
    var _a;
    if (!viewInfo)
        return;
    const headings = (_a = viewInfo.data.headings) !== null && _a !== void 0 ? _a : [];
    const editor = viewInfo.editor;
    if (!isNonEmptyBlockId(settings.contents))
        return;
    let tocHeading;
    let tocBuilder = '\n';
    const changes = [];
    // In case headings start above level 1, we don't want to indent the bullets too much
    let initialHeadingLevel = 1;
    if (headings.length > 0) {
        initialHeadingLevel = headings[0].level;
    }
    for (const heading of headings) {
        // ORDERING: Important to find the TOC heading before skipping skipped headings, since that is for numbering
        // Find the TOC heading
        if (heading.heading.endsWith(settings.contents)) {
            tocHeading = heading;
        }
        /* This code lets us skip TOC lines for skipped headings, but doesn't work well with first-level setting
        if ((settings.skipTopLevel && heading.level === 1) || (heading.level > settings.maxLevel)) {
          continue
        }
        */
        const tocEntry = createTocEntry(heading, settings, initialHeadingLevel);
        tocBuilder += tocEntry + '\n';
    }
    // Insert the generated table of contents
    if (tocHeading) {
        const from = {
            line: tocHeading.position.start.line + 1,
            ch: 0
        };
        // Find the end of the TOC section
        const startingLine = tocHeading.position.start.line + 1;
        let endingLine = startingLine;
        let foundList = false;
        const lastLineInEditor = editor.lastLine();
        for (;; endingLine++) {
            const line = editor.getLine(endingLine);
            if (line === undefined || endingLine > lastLineInEditor) {
                // Reached end of file, insert at the start of the TOC section
                endingLine = startingLine;
                break;
            }
            const trimmedLineText = line.trimStart();
            if (foundList) {
                if (!trimmedLineText.startsWith(TOC_LIST_ITEM_BULLET))
                    break;
                if (trimmedLineText.startsWith('#'))
                    break;
            }
            else {
                if (trimmedLineText.startsWith(TOC_LIST_ITEM_BULLET)) {
                    foundList = true;
                }
                else if (trimmedLineText.startsWith('#')) {
                    // Reached the next heading without finding existing TOC list, insert at the start of the TOC section
                    endingLine = startingLine;
                    break;
                }
                else {
                    continue;
                }
            }
        }
        if (tocBuilder === '\n') {
            tocBuilder = '';
        }
        const to = {
            line: endingLine,
            ch: 0
        };
        const range = { from, to };
        replaceRangeEconomically(editor, changes, range, tocBuilder);
    }
    // Execute the transaction to make all the changes at once
    if (changes.length > 0) {
        // eslint-disable-next-line no-console
        console.log('Number Headings Plugin: Applying table of contents changes:', changes.length);
        editor.transaction({
            changes: changes
        });
    }
};
const removeHeadingNumbering = (viewInfo) => {
    var _a;
    if (!viewInfo)
        return;
    const headings = (_a = viewInfo.data.headings) !== null && _a !== void 0 ? _a : [];
    const editor = viewInfo.editor;
    const changes = [];
    for (const heading of headings) {
        const prefixRange = findHeadingPrefixRange(editor, heading, { alphabet: true, roman: true });
        if (prefixRange === undefined)
            return;
        const headingHashString = makeHeadingHashString(editor, heading);
        if (headingHashString === undefined)
            return;
        replaceRangeEconomically(editor, changes, prefixRange, headingHashString + ' ');
    }
    if (changes.length > 0) {
        editor.transaction({
            changes: changes
        });
    }
};

class NumberHeadingsPluginSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        const { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Number Headings - Settings' });
        containerEl.createEl('div', { text: 'To add numbering to your document, bring up the command window (on Mac, type CMD+P), and then type "Number Headings" to see a list of available commands.' });
        containerEl.createEl('br', {});
        containerEl.createEl('div', { text: 'If the document has front matter defined with the below settings, the project-wide settings defined on this screen will be ignored. You can define front matter like this:' });
        containerEl.createEl('pre', {
            text: `    ---
    alias:
    - Example Alias
    tags:
    - example-tag
    number headings: first-level 1, start-at 2, max 6, 1.1, auto, contents ^toc
    ---`
        });
        containerEl.createEl('div', {
            text: `
      The 'number headings' front matter key is used to store numbering settings specific to the file. There are four possible options
      in the value to the right of the colon, separated by commas.
    `
        });
        const ul = containerEl.createEl('ul', {});
        const li0 = ul.createEl('li', {});
        li0.createEl('b', { text: 'Automatic numbering' });
        li0.createEl('span', { text: ': If \'auto\' appears, the document will be automatically numbered.' });
        const li1 = ul.createEl('li', {});
        li1.createEl('b', { text: 'First level to number' });
        li1.createEl('span', { text: ': If \'first-level 2\' appears, the numbering will start at the second level' });
        const li2 = ul.createEl('li', {});
        li2.createEl('b', { text: 'Start numbering first heading at' });
        li2.createEl('span', { text: ': If \'start-at C\' appears, the numbering of the first level will start at C, instead of A' });
        const li3 = ul.createEl('li', {});
        li3.createEl('b', { text: 'Maximum level to number' });
        li3.createEl('span', { text: ': If \'max 6\' appears, the headings above level 6 will be skipped.' });
        const li4 = ul.createEl('li', {});
        li4.createEl('b', { text: 'Table of contents anchor' });
        li4.createEl('span', { text: ': If \'contents ^toc\' appears, the heading that ends with the anchor ^toc will have a table of contents inserted beneath it.' });
        const li41 = ul.createEl('li', {});
        li41.createEl('b', { text: 'Skip headings anchor' });
        li41.createEl('span', { text: ': If \'skip ^skipped\' appears, the heading that ends with the anchor ^skipped will not be numbered.' });
        const li5 = ul.createEl('li', {});
        li5.createEl('b', { text: 'Numbering style' });
        li5.createEl('span', {
            text: `:
      A style text like '1.1', 'A.1', or '_.1.1' tells the plugin how to format the headings.
      If a style string ends with '.' (a dot), ':' (a colon), '-' (a dash), '—' (an emdash), or ')' (a right parenthesis), the heading numbers will be separated from the heading title
      with that symbol.`
        });
        const ul3 = li5.createEl('ul', {});
        ul3.createEl('li', {
            text: `      
      For example, '1.1' means both top level and other headings will be numbered starting from '1'.
    `
        });
        ul3.createEl('li', {
            text: `      
      For example, 'A.1' means top level headings will be numbered starting from 'A'.
    `
        });
        ul3.createEl('li', {
            text: `      
      For example, '_.A.1' means top level headings will NOT be numbered, but the next levels will be numbered with letters and numbers.
    `
        });
        ul3.createEl('li', {
            text: `      
      For example, '1.1:' means headings will look like '## 2.4: Example Heading'
    `
        });
        ul3.createEl('li', {
            text: `      
      For example, 'A.1-' means headings will look like '## B.5- Example Heading'
    `
        });
        ul3.createEl('li', {
            text: `      
      For example, 'I.A —' means headings will look like '## IV.A — Example Heading' (with Roman numerals)
    `
        });
        const li100 = ul.createEl('li', {});
        li100.createEl('b', { text: 'Numbering off' });
        li100.createEl('span', { text: ': If \'off\' appears, the document will not be numbered.' });
        new obsidian.Setting(containerEl)
            .setName('Skip top heading level')
            .setDesc('If selected, numbering will not be applied to the top heading level.')
            .addToggle(toggle => toggle
            .setValue(this.plugin.settings.skipTopLevel)
            .setTooltip('Skip top heading level')
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.skipTopLevel = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('First heading level')
            .setDesc('First heading level to number.')
            .addSlider(slider => slider
            .setLimits(1, 6, 1)
            .setValue(this.plugin.settings.firstLevel)
            .setDynamicTooltip()
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.firstLevel = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Start numbering at')
            .setDesc('Start numbering the first heading level from this value.')
            .addText(text => text
            .setValue(this.plugin.settings.startAt)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.startAt = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Maximum heading level')
            .setDesc('Maximum heading level to number.')
            .addSlider(slider => slider
            .setLimits(1, 6, 1)
            .setValue(this.plugin.settings.maxLevel)
            .setDynamicTooltip()
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.maxLevel = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Style for level 1 headings')
            .setDesc('Defines the numbering style for level one headings. Valid values are 1 (for numbers) or A (for capital letters) or I (for Roman numerals).')
            .addText(text => text
            .setValue(this.plugin.settings.styleLevel1)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.styleLevel1 = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Style for lower level headings (below level 1)')
            .setDesc('Defines the numbering style for headings below level one. Valid values are 1 (for numbers) or A (for capital letters) or I (for Roman numerals).')
            .addText(text => text
            .setValue(this.plugin.settings.styleLevelOther)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.styleLevelOther = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Automatic numbering')
            .setDesc('Turns on automatic numbering of documents.')
            .addToggle(toggle => toggle
            .setValue(this.plugin.settings.auto)
            .setTooltip('Turn on automatic numbering')
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.auto = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Separator style')
            .setDesc('Defines the separator style between the heading number and the heading text. Valid values are : (colon) or . (dot) or - (dash) or — (emdash) or ) (a right parenthesis). You can also leave it blank for no separator, or have a space before the separator.')
            .addText(text => text
            .setValue(this.plugin.settings.separator)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.separator = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Table of Contents Anchor')
            .setDesc('Anchor which labels the header where a table of contents should be inserted. The anchor should be added at the end of a header. For example, ^toc.')
            .addText(text => text
            .setValue(this.plugin.settings.contents)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.contents = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Skip Headings Anchor')
            .setDesc('Anchor which labels the headers that should not be numbered. The anchor should be added at the end of a header. For example, ^skipped.')
            .addText(text => text
            .setValue(this.plugin.settings.skipHeadings)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.skipHeadings = value;
            yield this.plugin.saveSettings();
        })));
    }
}
class NumberHeadingsPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            // eslint-disable-next-line no-console
            console.info('Loading Number Headings Plugin, version ' + this.manifest.version);
            yield this.loadSettings();
            this.addCommand({
                id: 'number-headings-with-options',
                name: 'Number all headings in document (and show options)',
                checkCallback: (checking) => {
                    if (checking)
                        return isViewActive(this.app);
                    const viewInfo = getViewInfo(this.app);
                    if (viewInfo) {
                        const settings = getFrontMatterSettingsOrAlternative(viewInfo.data, this.settings);
                        if (settings.off)
                            return false;
                        updateHeadingNumbering(viewInfo, settings);
                        setTimeout(() => {
                            // HACK: This must happen after a timeout so that there is time for the editor transaction to complete
                            const postNumberingViewInfo = getViewInfo(this.app);
                            updateTableOfContents(postNumberingViewInfo, settings);
                        }, 3000);
                        showNumberingDoneMessage(this.app, settings);
                    }
                    return false;
                }
            });
            this.addCommand({
                id: 'number-headings',
                name: 'Number all headings in document',
                checkCallback: (checking) => {
                    if (checking)
                        return isViewActive(this.app);
                    const viewInfo = getViewInfo(this.app);
                    if (viewInfo) {
                        const settings = getFrontMatterSettingsOrAlternative(viewInfo.data, this.settings);
                        if (settings.off)
                            return false;
                        updateHeadingNumbering(viewInfo, settings);
                        setTimeout(() => {
                            // HACK: This must happen after a timeout so that there is time for the editor transaction to complete
                            const postNumberingViewInfo = getViewInfo(this.app);
                            updateTableOfContents(postNumberingViewInfo, settings);
                        }, 3000);
                        // NOTE: The line below is intentionally commented out, since this command is the same as
                        //       the above command, except for this line
                        // showNumberingDoneMessage(this.app, settings, viewInfo)
                    }
                    return false;
                }
            });
            this.addCommand({
                id: 'remove-number-headings',
                name: 'Remove numbering from all headings in document',
                checkCallback: (checking) => {
                    if (checking)
                        return isViewActive(this.app);
                    const viewInfo = getViewInfo(this.app);
                    removeHeadingNumbering(viewInfo);
                    return true;
                }
            });
            this.addCommand({
                id: 'save-settings-to-front-matter',
                name: 'Save settings to front matter',
                checkCallback: (checking) => {
                    if (checking)
                        return isViewActive(this.app);
                    const viewInfo = getViewInfo(this.app);
                    const file = this.app.workspace.getActiveFile();
                    if (viewInfo && file) {
                        const settings = getFrontMatterSettingsOrAlternative(viewInfo.data, this.settings);
                        saveSettingsToFrontMatter(this.app.fileManager, file, settings);
                    }
                    return false;
                }
            });
            this.addSettingTab(new NumberHeadingsPluginSettingTab(this.app, this));
            this.registerInterval(window.setInterval(() => {
                const viewInfo = getViewInfo(this.app);
                if (viewInfo) {
                    const settings = getFrontMatterSettingsOrAlternative(viewInfo.data, this.settings);
                    if (settings.off)
                        return;
                    if (settings.auto) {
                        updateHeadingNumbering(viewInfo, settings);
                        setTimeout(() => {
                            // HACK: This must happen after a timeout so that there is time for the editor transaction to complete
                            const postNumberingViewInfo = getViewInfo(this.app);
                            updateTableOfContents(postNumberingViewInfo, settings);
                        }, 3000);
                        // eslint-disable-next-line no-console
                        console.log('Number Headings Plugin: Automatically numbered document');
                    }
                }
            }, 10 * 1000));
        });
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}

module.exports = NumberHeadingsPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9hY3RpdmVWaWV3SGVscGVycy50cyIsIm5vZGVfbW9kdWxlcy9yb21hbnMvcm9tYW5zLmpzIiwic3JjL251bWJlcmluZ1Rva2Vucy50cyIsInNyYy9zZXR0aW5nc1R5cGVzLnRzIiwic3JjL3RleHRQcm9jZXNzaW5nLnRzIiwic3JjL2Zyb250TWF0dGVyLnRzIiwic3JjL21lc3NhZ2VzLnRzIiwic3JjL251bWJlcmluZy50cyIsInNyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXNEZWNvcmF0ZShjdG9yLCBkZXNjcmlwdG9ySW4sIGRlY29yYXRvcnMsIGNvbnRleHRJbiwgaW5pdGlhbGl6ZXJzLCBleHRyYUluaXRpYWxpemVycykge1xyXG4gICAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XHJcbiAgICB2YXIga2luZCA9IGNvbnRleHRJbi5raW5kLCBrZXkgPSBraW5kID09PSBcImdldHRlclwiID8gXCJnZXRcIiA6IGtpbmQgPT09IFwic2V0dGVyXCIgPyBcInNldFwiIDogXCJ2YWx1ZVwiO1xyXG4gICAgdmFyIHRhcmdldCA9ICFkZXNjcmlwdG9ySW4gJiYgY3RvciA/IGNvbnRleHRJbltcInN0YXRpY1wiXSA/IGN0b3IgOiBjdG9yLnByb3RvdHlwZSA6IG51bGw7XHJcbiAgICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcclxuICAgIHZhciBfLCBkb25lID0gZmFsc2U7XHJcbiAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4pIGNvbnRleHRbcF0gPSBwID09PSBcImFjY2Vzc1wiID8ge30gOiBjb250ZXh0SW5bcF07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBjb250ZXh0SW4uYWNjZXNzKSBjb250ZXh0LmFjY2Vzc1twXSA9IGNvbnRleHRJbi5hY2Nlc3NbcF07XHJcbiAgICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gKDAsIGRlY29yYXRvcnNbaV0pKGtpbmQgPT09IFwiYWNjZXNzb3JcIiA/IHsgZ2V0OiBkZXNjcmlwdG9yLmdldCwgc2V0OiBkZXNjcmlwdG9yLnNldCB9IDogZGVzY3JpcHRvcltrZXldLCBjb250ZXh0KTtcclxuICAgICAgICBpZiAoa2luZCA9PT0gXCJhY2Nlc3NvclwiKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwgfHwgdHlwZW9mIHJlc3VsdCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZFwiKTtcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmdldCkpIGRlc2NyaXB0b3IuZ2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcclxuICAgICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LmluaXQpKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIGlmIChraW5kID09PSBcImZpZWxkXCIpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgICAgICBlbHNlIGRlc2NyaXB0b3Jba2V5XSA9IF87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgY29udGV4dEluLm5hbWUsIGRlc2NyaXB0b3IpO1xyXG4gICAgZG9uZSA9IHRydWU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xyXG4gICAgdmFyIHVzZVZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDI7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluaXRpYWxpemVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VWYWx1ZSA/IHZhbHVlIDogdm9pZCAwO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcHJvcEtleSh4KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3ltYm9sXCIpIG5hbWUgPSBuYW1lLmRlc2NyaXB0aW9uID8gXCJbXCIuY29uY2F0KG5hbWUuZGVzY3JpcHRpb24sIFwiXVwiKSA6IFwiXCI7XHJcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsIFwibmFtZVwiLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHByZWZpeCA/IFwiXCIuY29uY2F0KHByZWZpeCwgXCIgXCIsIG5hbWUpIDogbmFtZSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiwgYXdhaXRSZXR1cm4pLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiBhd2FpdFJldHVybihmKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZiwgcmVqZWN0KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZShlbnYsIHZhbHVlLCBhc3luYykge1xyXG4gICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcclxuICAgICAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmFzeW5jRGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0Rpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmFzeW5jRGlzcG9zZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXNwb3NlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5kaXNwb3NlXTtcclxuICAgICAgICAgICAgaWYgKGFzeW5jKSBpbm5lciA9IGRpc3Bvc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZGlzcG9zZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IG5vdCBkaXNwb3NhYmxlLlwiKTtcclxuICAgICAgICBpZiAoaW5uZXIpIGRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdHJ5IHsgaW5uZXIuY2FsbCh0aGlzKTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IH0gfTtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IHZhbHVlOiB2YWx1ZSwgZGlzcG9zZTogZGlzcG9zZSwgYXN5bmM6IGFzeW5jIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXN5bmMpIHtcclxuICAgICAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG5cclxufVxyXG5cclxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcclxuICAgIHZhciBlID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIGUubmFtZSA9IFwiU3VwcHJlc3NlZEVycm9yXCIsIGUuZXJyb3IgPSBlcnJvciwgZS5zdXBwcmVzc2VkID0gc3VwcHJlc3NlZCwgZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2Rpc3Bvc2VSZXNvdXJjZXMoZW52KSB7XHJcbiAgICBmdW5jdGlvbiBmYWlsKGUpIHtcclxuICAgICAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XHJcbiAgICAgICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG5leHQoKSB7XHJcbiAgICAgICAgd2hpbGUgKGVudi5zdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIHJlYyA9IGVudi5zdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZWMuZGlzcG9zZSAmJiByZWMuZGlzcG9zZS5jYWxsKHJlYy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjLmFzeW5jKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCkudGhlbihuZXh0LCBmdW5jdGlvbihlKSB7IGZhaWwoZSk7IHJldHVybiBuZXh0KCk7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXh0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIF9fZXh0ZW5kczogX19leHRlbmRzLFxyXG4gICAgX19hc3NpZ246IF9fYXNzaWduLFxyXG4gICAgX19yZXN0OiBfX3Jlc3QsXHJcbiAgICBfX2RlY29yYXRlOiBfX2RlY29yYXRlLFxyXG4gICAgX19wYXJhbTogX19wYXJhbSxcclxuICAgIF9fbWV0YWRhdGE6IF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXI6IF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yOiBfX2dlbmVyYXRvcixcclxuICAgIF9fY3JlYXRlQmluZGluZzogX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX19leHBvcnRTdGFyOiBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX3ZhbHVlczogX192YWx1ZXMsXHJcbiAgICBfX3JlYWQ6IF9fcmVhZCxcclxuICAgIF9fc3ByZWFkOiBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzOiBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fc3ByZWFkQXJyYXk6IF9fc3ByZWFkQXJyYXksXHJcbiAgICBfX2F3YWl0OiBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcjogX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3I6IF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzOiBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6IF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyOiBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQ6IF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXHJcbiAgICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZTogX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXHJcbiAgICBfX2Rpc3Bvc2VSZXNvdXJjZXM6IF9fZGlzcG9zZVJlc291cmNlcyxcclxufTtcclxuIiwiaW1wb3J0IHsgQXBwLCBDYWNoZWRNZXRhZGF0YSwgRWRpdG9yLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbidcblxuZnVuY3Rpb24gZ2V0QWN0aXZlVmlldyhhcHA6IEFwcCk6IE1hcmtkb3duVmlldyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGFjdGl2ZVZpZXcgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KVxuICByZXR1cm4gYWN0aXZlVmlldyA/PyB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmlld0FjdGl2ZShhcHA6IEFwcCk6IGJvb2xlYW4ge1xuICBjb25zdCBhY3RpdmVWaWV3ID0gZ2V0QWN0aXZlVmlldyhhcHApXG4gIGlmIChhY3RpdmVWaWV3ICYmIGFjdGl2ZVZpZXcuZmlsZSkgcmV0dXJuIHRydWVcbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIGdldFZpZXdNZXRhZGF0YShhcHA6IEFwcCk6IENhY2hlZE1ldGFkYXRhIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgYWN0aXZlVmlldyA9IGdldEFjdGl2ZVZpZXcoYXBwKVxuICBpZiAoYWN0aXZlVmlldyAmJiBhY3RpdmVWaWV3LmZpbGUpIHtcbiAgICBjb25zdCBkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZVZpZXcuZmlsZSkgfHwge31cbiAgICByZXR1cm4gZGF0YVxuICB9XG4gIHJldHVybiB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWaWV3SW5mbyB7XG4gIGFjdGl2ZVZpZXc6IE1hcmtkb3duVmlld1xuICBkYXRhOiBDYWNoZWRNZXRhZGF0YVxuICBlZGl0b3I6IEVkaXRvclxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Vmlld0luZm8oYXBwOiBBcHApOiBWaWV3SW5mbyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGFjdGl2ZVZpZXcgPSBnZXRBY3RpdmVWaWV3KGFwcClcbiAgY29uc3QgZGF0YSA9IGdldFZpZXdNZXRhZGF0YShhcHApXG4gIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcgPyBhY3RpdmVWaWV3LmVkaXRvciA6IHVuZGVmaW5lZFxuXG4gIGlmIChhY3RpdmVWaWV3ICYmIGRhdGEgJiYgZWRpdG9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZVZpZXcsIGRhdGEsIGVkaXRvclxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWRcbn1cbiIsImNvbnN0IHJvbWFuX21hcCA9IHtcbiAgTTogMTAwMCxcbiAgQ006IDkwMCxcbiAgRDogNTAwLFxuICBDRDogNDAwLFxuICBDOiAxMDAsXG4gIFhDOiA5MCxcbiAgTDogNTAsXG4gIFhMOiA0MCxcbiAgWDogMTAsXG4gIElYOiA5LFxuICBWOiA1LFxuICBJVjogNCxcbiAgSTogMVxufVxuXG5jb25zdCBhbGxDaGFycyA9IE9iamVjdC5rZXlzKHJvbWFuX21hcClcbmNvbnN0IGFsbE51bWVyYWxzID0gT2JqZWN0LnZhbHVlcyhyb21hbl9tYXApXG5jb25zdCByb21hblBhdHRlcm4gPVxuICAvXihNezEsNH0oQ018Q0R8RD9DezAsM30pKFhDfFhMfEw/WHswLDN9KShJWHxJVnxWP0l7MCwzfSl8TXswLDR9KENNfEM/RHxEP0N7MSwzfSkoWEN8WEx8TD9YezAsM30pKElYfElWfFY/SXswLDN9KXxNezAsNH0oQ018Q0R8RD9DezAsM30pKFhDfFg/THxMP1h7MSwzfSkoSVh8SVZ8Vj9JezAsM30pfE17MCw0fShDTXxDRHxEP0N7MCwzfSkoWEN8WEx8TD9YezAsM30pKElYfEk/VnxWP0l7MSwzfSkpJC9cblxuY29uc3Qgcm9tYW5pemUgPSAoZGVjaW1hbCkgPT4ge1xuICBpZiAoXG4gICAgZGVjaW1hbCA8PSAwIHx8XG4gICAgdHlwZW9mIGRlY2ltYWwgIT09ICdudW1iZXInIHx8XG4gICAgTWF0aC5mbG9vcihkZWNpbWFsKSAhPT0gZGVjaW1hbFxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVpcmVzIGFuIHVuc2lnbmVkIGludGVnZXInKVxuICB9XG4gIGlmIChkZWNpbWFsID49IDQwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVpcmVzIG1heCB2YWx1ZSBvZiBsZXNzIHRoYW4gMzk5OSBvciBsZXNzJylcbiAgfVxuICBsZXQgcm9tYW4gPSAnJ1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbENoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgd2hpbGUgKGRlY2ltYWwgPj0gYWxsTnVtZXJhbHNbaV0pIHtcbiAgICAgIGRlY2ltYWwgLT0gYWxsTnVtZXJhbHNbaV1cbiAgICAgIHJvbWFuICs9IGFsbENoYXJzW2ldXG4gICAgfVxuICB9XG4gIHJldHVybiByb21hblxufVxuXG5jb25zdCBkZXJvbWFuaXplID0gKHJvbWFuU3RyKSA9PiB7XG4gIGlmICh0eXBlb2Ygcm9tYW5TdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZXF1aXJlcyBhIHN0cmluZycpXG4gIH1cbiAgaWYgKCFyb21hblBhdHRlcm4udGVzdChyb21hblN0cikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlcXVpcmVzIHZhbGlkIHJvbWFuIG51bWVyYWwgc3RyaW5nJylcbiAgfVxuICBsZXQgcm9tYW5TdHJpbmcgPSByb21hblN0ci50b1VwcGVyQ2FzZSgpXG4gIGxldCBhcmFiaWMgPSAwXG4gIGxldCBpdGVyYXRpb24gPSByb21hblN0cmluZy5sZW5ndGhcbiAgd2hpbGUgKGl0ZXJhdGlvbi0tKSB7XG4gICAgbGV0IGN1bXVsYXRpdmUgPSByb21hbl9tYXBbcm9tYW5TdHJpbmdbaXRlcmF0aW9uXV1cbiAgICBpZiAoY3VtdWxhdGl2ZSA8IHJvbWFuX21hcFtyb21hblN0cmluZ1tpdGVyYXRpb24gKyAxXV0pIHtcbiAgICAgIGFyYWJpYyAtPSBjdW11bGF0aXZlXG4gICAgfSBlbHNlIHtcbiAgICAgIGFyYWJpYyArPSBjdW11bGF0aXZlXG4gICAgfVxuICB9XG4gIHJldHVybiBhcmFiaWNcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlcm9tYW5pemUsXG4gIHJvbWFuaXplLFxuICBhbGxDaGFycyxcbiAgYWxsTnVtZXJhbHNcbn1cbiIsImltcG9ydCB7IGRlcm9tYW5pemUsIHJvbWFuaXplIH0gZnJvbSAncm9tYW5zJ1xuXG5leHBvcnQgdHlwZSBOdW1iZXJpbmdUb2tlbiA9IE51bWJlcmluZ1Rva2VuQXJhYmljIHwgTnVtYmVyaW5nVG9rZW5BbHBoYWJldCB8IE51bWJlcmluZ1Rva2VuUm9tYW5cbmV4cG9ydCB0eXBlIE51bWJlcmluZ1Rva2VuQXJhYmljID0ge1xuICBzdHlsZTogJzEnXG4gIHZhbHVlOiBudW1iZXJcbn1cbmV4cG9ydCB0eXBlIE51bWJlcmluZ1Rva2VuQWxwaGFiZXQgPSB7XG4gIHN0eWxlOiAnQSdcbiAgdmFsdWU6IHN0cmluZ1xufVxuZXhwb3J0IHR5cGUgTnVtYmVyaW5nVG9rZW5Sb21hbiA9IHtcbiAgc3R5bGU6ICdJJ1xuICB2YWx1ZTogc3RyaW5nXG59XG5leHBvcnQgdHlwZSBOdW1iZXJpbmdTdHlsZSA9ICcxJyB8ICdBJyB8ICdJJ1xuZXhwb3J0IHR5cGUgTnVtYmVyaW5nVmFsdWUgPSBudW1iZXIgfCBzdHJpbmdcblxuLy8gVmFsaWRhdGVzIHRoZSBzdHJpbmcgdXNpbmcgYSByZWdleCB0byBlbnN1cmUgaXMgaXMgYSB2YWxpZCBhcmFiaWMgbnVtYmVyaW5nIHZhbHVlXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEFyYWJpY051bWJlcmluZ1ZhbHVlU3RyaW5nKHM6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCByZWdleCA9IC9eWzAtOV0rJC9cbiAgcmV0dXJuIHJlZ2V4LnRlc3Qocylcbn1cblxuLy8gVmFsaWRhdGVzIHRoZSBzdHJpbmcgdXNpbmcgYSByZWdleCB0byBlbnN1cmUgaXMgaXMgYSB2YWxpZCBhbHBoYWJldCBudW1iZXJpbmcgdmFsdWVcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkQWxwaGFiZXROdW1iZXJpbmdWYWx1ZVN0cmluZyhzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgcmVnZXggPSAvXltBLVpdJC9cbiAgcmV0dXJuIHJlZ2V4LnRlc3Qocylcbn1cblxuLy8gVmFsaWRhdGVzIHRoZSBzdHJpbmcgdXNpbmcgYSByZWdleCB0byBlbnN1cmUgaXMgaXMgYSB2YWxpZCByb21hbiBudW1iZXJpbmcgdmFsdWVcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkUm9tYW5OdW1iZXJpbmdWYWx1ZVN0cmluZyhzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgcmVnZXggPSAvXlswSVZYTENETV0rJC8gLy8gVGhpcyBpbmNsdWRlcyB6ZXJvIGZvciB6ZXJvdGggdGVzdGluZ1xuICByZXR1cm4gcmVnZXgudGVzdChzKVxufVxuXG5mdW5jdGlvbiBwcmludGFibGVOdW1iZXJpbmdUb2tlbih0OiBOdW1iZXJpbmdUb2tlbik6IHN0cmluZyB7XG4gIHN3aXRjaCAodC5zdHlsZSkge1xuICAgIGNhc2UgJzEnOlxuICAgICAgcmV0dXJuIHQudmFsdWUudG9TdHJpbmcoKVxuICAgIGNhc2UgJ0EnOlxuICAgICAgcmV0dXJuIHQudmFsdWVcbiAgICBjYXNlICdJJzpcbiAgICAgIHJldHVybiB0LnZhbHVlXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm90aE51bWJlcmluZ1Rva2VuSW5TdHlsZShzdHlsZTogTnVtYmVyaW5nU3R5bGUpOiBOdW1iZXJpbmdUb2tlbiB7XG4gIHN3aXRjaCAoc3R5bGUpIHtcbiAgICBjYXNlICcxJzpcbiAgICAgIHJldHVybiB7IHN0eWxlOiAnMScsIHZhbHVlOiAwIH1cbiAgICBjYXNlICdBJzpcbiAgICAgIHJldHVybiB7IHN0eWxlOiAnQScsIHZhbHVlOiAnWicgfVxuICAgIGNhc2UgJ0knOlxuICAgICAgcmV0dXJuIHsgc3R5bGU6ICdJJywgdmFsdWU6ICcwJyB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0TnVtYmVyaW5nVG9rZW5JblN0eWxlKHN0eWxlOiBOdW1iZXJpbmdTdHlsZSk6IE51bWJlcmluZ1Rva2VuIHtcbiAgc3dpdGNoIChzdHlsZSkge1xuICAgIGNhc2UgJzEnOlxuICAgICAgcmV0dXJuIHsgc3R5bGU6ICcxJywgdmFsdWU6IDEgfVxuICAgIGNhc2UgJ0EnOlxuICAgICAgcmV0dXJuIHsgc3R5bGU6ICdBJywgdmFsdWU6ICdBJyB9XG4gICAgY2FzZSAnSSc6XG4gICAgICByZXR1cm4geyBzdHlsZTogJ0knLCB2YWx1ZTogJ0knIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV4dE51bWJlcmluZ1Rva2VuKHQ6IE51bWJlcmluZ1Rva2VuKTogTnVtYmVyaW5nVG9rZW4ge1xuICBzd2l0Y2ggKHQuc3R5bGUpIHtcbiAgICBjYXNlICcxJzpcbiAgICAgIHJldHVybiB7IHN0eWxlOiAnMScsIHZhbHVlOiB0LnZhbHVlICsgMSB9XG4gICAgY2FzZSAnQSc6XG4gICAgICBpZiAodC52YWx1ZSA9PT0gJ1onKSByZXR1cm4geyBzdHlsZTogJ0EnLCB2YWx1ZTogJ0EnIH1cbiAgICAgIGVsc2UgcmV0dXJuIHsgc3R5bGU6ICdBJywgdmFsdWU6IFN0cmluZy5mcm9tQ2hhckNvZGUodC52YWx1ZS5jaGFyQ29kZUF0KDApICsgMSkgfVxuICAgIGNhc2UgJ0knOlxuICAgICAgaWYgKHQudmFsdWUgPT09ICcwJykgcmV0dXJuIHsgc3R5bGU6ICdJJywgdmFsdWU6ICdJJyB9XG4gICAgICBlbHNlIHJldHVybiB7IHN0eWxlOiAnSScsIHZhbHVlOiByb21hbml6ZShkZXJvbWFuaXplKHQudmFsdWUpICsgMSkgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2aW91c051bWJlcmluZ1Rva2VuKHQ6IE51bWJlcmluZ1Rva2VuKTogTnVtYmVyaW5nVG9rZW4ge1xuICBzd2l0Y2ggKHQuc3R5bGUpIHtcbiAgICBjYXNlICcxJzpcbiAgICAgIHJldHVybiB7IHN0eWxlOiAnMScsIHZhbHVlOiB0LnZhbHVlIC0gMSB9XG4gICAgY2FzZSAnQSc6XG4gICAgICBpZiAodC52YWx1ZSA9PT0gJ0EnKSByZXR1cm4geyBzdHlsZTogJ0EnLCB2YWx1ZTogJ1onIH1cbiAgICAgIGVsc2UgcmV0dXJuIHsgc3R5bGU6ICdBJywgdmFsdWU6IFN0cmluZy5mcm9tQ2hhckNvZGUodC52YWx1ZS5jaGFyQ29kZUF0KDApIC0gMSkgfVxuICAgIGNhc2UgJ0knOlxuICAgICAgaWYgKHQudmFsdWUgPT09ICdJJykgcmV0dXJuIHsgc3R5bGU6ICdJJywgdmFsdWU6ICcwJyB9XG4gICAgICBlbHNlIHJldHVybiB7IHN0eWxlOiAnSScsIHZhbHVlOiByb21hbml6ZShkZXJvbWFuaXplKHQudmFsdWUpIC0gMSkgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTnVtYmVyaW5nU3RyaW5nKG51bWJlcmluZ1N0YWNrOiBOdW1iZXJpbmdUb2tlbltdKTogc3RyaW5nIHtcbiAgbGV0IG51bWJlcmluZ1N0cmluZyA9ICcnXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJpbmdTdGFjay5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpID09PSAwKSB7XG4gICAgICBudW1iZXJpbmdTdHJpbmcgKz0gJyAnXG4gICAgfSBlbHNlIHtcbiAgICAgIG51bWJlcmluZ1N0cmluZyArPSAnLidcbiAgICB9XG4gICAgbnVtYmVyaW5nU3RyaW5nICs9IHByaW50YWJsZU51bWJlcmluZ1Rva2VuKG51bWJlcmluZ1N0YWNrW2ldKVxuICB9XG5cbiAgcmV0dXJuIG51bWJlcmluZ1N0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRBdE9yWmVyb3RoSW5TdHlsZShzdGFydEF0U2V0dGluZ1N0cmluZzogc3RyaW5nLCBzdHlsZTogTnVtYmVyaW5nU3R5bGUpOiBOdW1iZXJpbmdUb2tlbiB7XG4gIGlmIChzdGFydEF0U2V0dGluZ1N0cmluZyA9PT0gJycpIHJldHVybiB6ZXJvdGhOdW1iZXJpbmdUb2tlbkluU3R5bGUoc3R5bGUpXG5cbiAgbGV0IGZpcnN0TnVtYmVyaW5nVG9rZW5Gcm9tU2V0dGluZzogTnVtYmVyaW5nVG9rZW5cblxuICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgY2FzZSAnMSc6XG4gICAgICBpZiAoIWlzVmFsaWRBcmFiaWNOdW1iZXJpbmdWYWx1ZVN0cmluZyhzdGFydEF0U2V0dGluZ1N0cmluZykpIHJldHVybiB6ZXJvdGhOdW1iZXJpbmdUb2tlbkluU3R5bGUoc3R5bGUpXG5cbiAgICAgIGZpcnN0TnVtYmVyaW5nVG9rZW5Gcm9tU2V0dGluZyA9IHsgc3R5bGU6ICcxJywgdmFsdWU6IHBhcnNlSW50KHN0YXJ0QXRTZXR0aW5nU3RyaW5nKSB9XG4gICAgICBicmVha1xuICAgIGNhc2UgJ0EnOlxuICAgICAgaWYgKCFpc1ZhbGlkQWxwaGFiZXROdW1iZXJpbmdWYWx1ZVN0cmluZyhzdGFydEF0U2V0dGluZ1N0cmluZykpIHJldHVybiB6ZXJvdGhOdW1iZXJpbmdUb2tlbkluU3R5bGUoc3R5bGUpXG5cbiAgICAgIGZpcnN0TnVtYmVyaW5nVG9rZW5Gcm9tU2V0dGluZyA9IHsgc3R5bGU6ICdBJywgdmFsdWU6IHN0YXJ0QXRTZXR0aW5nU3RyaW5nIH1cbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnSSc6XG4gICAgICBpZiAoIWlzVmFsaWRSb21hbk51bWJlcmluZ1ZhbHVlU3RyaW5nKHN0YXJ0QXRTZXR0aW5nU3RyaW5nKSkgcmV0dXJuIHplcm90aE51bWJlcmluZ1Rva2VuSW5TdHlsZShzdHlsZSlcbiAgICAgIGZpcnN0TnVtYmVyaW5nVG9rZW5Gcm9tU2V0dGluZyA9IHsgc3R5bGU6ICdJJywgdmFsdWU6IHN0YXJ0QXRTZXR0aW5nU3RyaW5nIH1cbiAgICAgIGJyZWFrXG4gIH1cblxuICAvLyBDb252ZXJ0IHRoZSBmaXJzdCBudW1iZXJpbmcgdG9rZW4gdG8gYSB6ZXJvdGggbnVtYmVyaW5nIHRva2VuXG4gIHJldHVybiBwcmV2aW91c051bWJlcmluZ1Rva2VuKGZpcnN0TnVtYmVyaW5nVG9rZW5Gcm9tU2V0dGluZylcbn1cbiIsImltcG9ydCB7IGlzVmFsaWRBbHBoYWJldE51bWJlcmluZ1ZhbHVlU3RyaW5nLCBpc1ZhbGlkQXJhYmljTnVtYmVyaW5nVmFsdWVTdHJpbmcsIGlzVmFsaWRSb21hbk51bWJlcmluZ1ZhbHVlU3RyaW5nLCBOdW1iZXJpbmdTdHlsZSB9IGZyb20gJy4vbnVtYmVyaW5nVG9rZW5zJ1xuXG5leHBvcnQgaW50ZXJmYWNlIE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3Mge1xuICBza2lwVG9wTGV2ZWw6IGJvb2xlYW4sXG4gIGZpcnN0TGV2ZWw6IG51bWJlcixcbiAgbWF4TGV2ZWw6IG51bWJlcixcbiAgc3R5bGVMZXZlbDE6IE51bWJlcmluZ1N0eWxlLFxuICBzdHlsZUxldmVsT3RoZXI6IE51bWJlcmluZ1N0eWxlLFxuICBhdXRvOiBib29sZWFuLFxuICBzZXBhcmF0b3I6IHN0cmluZyxcbiAgY29udGVudHM6IHN0cmluZyxcbiAgc2tpcEhlYWRpbmdzOiBzdHJpbmcsXG4gIHN0YXJ0QXQ6IHN0cmluZyxcbiAgb2ZmOiBib29sZWFuXG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBSZWFkb25seTxOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzPiA9IHtcbiAgc2tpcFRvcExldmVsOiBmYWxzZSxcbiAgZmlyc3RMZXZlbDogMSxcbiAgbWF4TGV2ZWw6IDYsXG4gIHN0eWxlTGV2ZWwxOiAnMScsXG4gIHN0eWxlTGV2ZWxPdGhlcjogJzEnLFxuICBhdXRvOiBmYWxzZSxcbiAgc2VwYXJhdG9yOiAnJyxcbiAgY29udGVudHM6ICcnLFxuICBza2lwSGVhZGluZ3M6ICcnLFxuICBzdGFydEF0OiAnJyxcbiAgb2ZmOiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZE51bWJlcmluZ1N0eWxlU3RyaW5nKHM6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAocyA9PT0gJ0EnIHx8IHMgPT09ICcxJyB8fCBzID09PSAnSScpIHJldHVybiB0cnVlXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZE51bWJlcmluZ1ZhbHVlU3RyaW5nKHM6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAocyA9PT0gJycgfHwgaXNWYWxpZEFyYWJpY051bWJlcmluZ1ZhbHVlU3RyaW5nKHMpIHx8IGlzVmFsaWRBbHBoYWJldE51bWJlcmluZ1ZhbHVlU3RyaW5nKHMpIHx8IGlzVmFsaWRSb21hbk51bWJlcmluZ1ZhbHVlU3RyaW5nKHMpKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRGbGFnKGY6IHVua25vd24pOiBib29sZWFuIHtcbiAgaWYgKGYgPT09IHRydWUgfHwgZiA9PT0gZmFsc2UpIHJldHVybiB0cnVlXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZpcnN0T3JNYXhMZXZlbCh4OiB1bmtub3duKTogYm9vbGVhbiB7XG4gIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicgJiYgeCA+PSAxICYmIHggPD0gNikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkU2VwYXJhdG9yKHg6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnc3RyaW5nJyAmJlxuICAgIChcbiAgICAgIHggPT09ICcnIHx8XG4gICAgICB4ID09PSAnOicgfHwgeCA9PT0gJyA6JyB8fFxuICAgICAgeCA9PT0gJy4nIHx8IHggPT09ICcgLicgfHxcbiAgICAgIHggPT09ICctJyB8fCB4ID09PSAnIC0nIHx8XG4gICAgICB4ID09PSAn4oCUJyB8fCB4ID09PSAnIOKAlCcgfHwgLyogZW0tZGFzaCAqL1xuICAgICAgeCA9PT0gJyknIHx8IHggPT09ICcgKSdcbiAgICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkQmxvY2tJZFNldHRpbmcoeDogdW5rbm93bik6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnICYmICh4ID09PSAnJyB8fCB4LnN0YXJ0c1dpdGgoJ14nKSkpIHJldHVybiB0cnVlXG4gIHJldHVybiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb25FbXB0eUJsb2NrSWQoeDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmICh4Lmxlbmd0aCA+IDIgJiYgeC5zdGFydHNXaXRoKCdeJykpIHJldHVybiB0cnVlXG4gIHJldHVybiBmYWxzZVxufVxuIiwiaW1wb3J0IHsgRWRpdG9yUmFuZ2UgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IE51bWJlcmluZ1N0eWxlIH0gZnJvbSAnLi9udW1iZXJpbmdUb2tlbnMnXG5pbXBvcnQgeyBpc1ZhbGlkTnVtYmVyaW5nU3R5bGVTdHJpbmcsIGlzVmFsaWRTZXBhcmF0b3IsIE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzVHlwZXMnXG5cbmV4cG9ydCB0eXBlIFN1cHBvcnRGbGFncyA9IHtcbiAgYWxwaGFiZXQ6IGJvb2xlYW4sXG4gIHJvbWFuOiBib29sZWFuLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3VwcG9ydEZsYWdzRnJvbVNldHRpbmdzKHN0eWxlTGV2ZWwxOiBzdHJpbmcsIHN0eWxlTGV2ZWxPdGhlcjogc3RyaW5nKTogU3VwcG9ydEZsYWdzIHtcbiAgcmV0dXJuIHtcbiAgICBhbHBoYWJldDogc3R5bGVMZXZlbDEgPT09ICdBJyB8fCBzdHlsZUxldmVsT3RoZXIgPT09ICdBJyxcbiAgICByb21hbjogc3R5bGVMZXZlbDEgPT09ICdJJyB8fCBzdHlsZUxldmVsT3RoZXIgPT09ICdJJ1xuICB9XG59XG5cbi8vIEdldCB0aGUgcmVnZXggZm9yIHRoZSBoZWFkZXIgc3RyaW5nLCBiYXNlZCBvbiB0aGUgc3VwcG9ydCBmbGFncy4gVGhlIGdlbmVyYXRlZCByZWdleCBpcyB1c2VkIHRvIGZpbmQgdGhlIHJhbmdlIG9mIHRoZSBoZWFkZXIgcHJlZml4LlxuLy8gVGhlIHJlZ2V4IGlzIGdlbmVyYXRlZCBkeW5hbWljYWxseSwgYmVjYXVzZSB0aGUgcmVnZXggaXMgZGlmZmVyZW50IGRlcGVuZGluZyBvbiB0aGUgc3VwcG9ydCBmbGFncy5cbmZ1bmN0aW9uIGdldFJlZ2V4Rm9ySGVhZGVyU3RyaW5nKGZsYWdzOiBTdXBwb3J0RmxhZ3MpOiBSZWdFeHAge1xuICBpZiAoZmxhZ3MuYWxwaGFiZXQgJiYgZmxhZ3Mucm9tYW4pIHtcbiAgICAvLyBSZWdleCB0byBtYXRjaCB0aGUgaGVhZGluZyBwcmVmaXgsIGluY2x1ZGluZyB0aGUgc3BhY2UgYWZ0ZXIgdGhlIGhhc2goZXMpLCBidXQgbm90IHRoZSBoZWFkaW5nIHRleHRcbiAgICByZXR1cm4gL15cXHN7MCw0fSMrKCApPyhbMC05XStcXC58W0EtWl1cXC58W0lWWExDRE1dK1xcLikqKFswLTldK3xbQS1aXXxbSVZYTENETV0rKT8oICk/WynigJQ6Li1dPyggKSsvZ1xuICB9IGVsc2UgaWYgKCFmbGFncy5hbHBoYWJldCAmJiBmbGFncy5yb21hbikge1xuICAgIC8vIFJlZ2V4IHRvIG1hdGNoIHRoZSBoZWFkaW5nIHByZWZpeCwgaW5jbHVkaW5nIHRoZSBzcGFjZSBhZnRlciB0aGUgaGFzaChlcyksIGJ1dCBub3QgdGhlIGhlYWRpbmcgdGV4dFxuICAgIHJldHVybiAvXlxcc3swLDR9IysoICk/KFswLTldK1xcLnxbSVZYTENETV0rXFwuKSooWzAtOV0rfFtJVlhMQ0RNXSspPyggKT9bKeKAlDouLV0/KCApKy9nXG4gIH0gZWxzZSBpZiAoZmxhZ3MuYWxwaGFiZXQgJiYgIWZsYWdzLnJvbWFuKSB7XG4gICAgLy8gUmVnZXggdG8gbWF0Y2ggdGhlIGhlYWRpbmcgcHJlZml4LCBpbmNsdWRpbmcgdGhlIHNwYWNlIGFmdGVyIHRoZSBoYXNoKGVzKSwgYnV0IG5vdCB0aGUgaGVhZGluZyB0ZXh0XG4gICAgcmV0dXJuIC9eXFxzezAsNH0jKyggKT8oWzAtOV0rXFwufFtBLVpdXFwuKSooWzAtOV0rfFtBLVpdKT8oICk/WynigJQ6Li1dPyggKSsvZ1xuICB9IGVsc2UgaWYgKCFmbGFncy5hbHBoYWJldCAmJiAhZmxhZ3Mucm9tYW4pIHtcbiAgICAvLyBSZWdleCB0byBtYXRjaCB0aGUgaGVhZGluZyBwcmVmaXgsIGluY2x1ZGluZyB0aGUgc3BhY2UgYWZ0ZXIgdGhlIGhhc2goZXMpLCBidXQgbm90IHRoZSBoZWFkaW5nIHRleHRcbiAgICByZXR1cm4gL15cXHN7MCw0fSMrKCApPyhbMC05XStcXC4pKihbMC05XSspPyggKT9bKeKAlDouLV0/KCApKy9nXG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgY29tYmluYXRpb24gb2Ygc3VwcG9ydCBmbGFncycpXG59XG5cbi8vIEZpbmQgdGhlIHJhbmdlIG9mIHRoZSBoZWFkaW5nIHByZWZpeCwgaW5jbHVkaW5nIHRoZSBzcGFjZSBhZnRlciBhbnkgbnVtYmVyaW5nLCBidXQgbm90IHRoZSBoZWFkaW5nIHRleHRcbmV4cG9ydCBmdW5jdGlvbiBmaW5kUmFuZ2VJbkhlYWRlclN0cmluZyhsaW5lVGV4dDogc3RyaW5nLCBsaW5lTnVtYmVyOiBudW1iZXIsIGZsYWdzOiBTdXBwb3J0RmxhZ3MpOiBFZGl0b3JSYW5nZSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHJlZ2V4ID0gZ2V0UmVnZXhGb3JIZWFkZXJTdHJpbmcoZmxhZ3MpXG5cbiAgaWYgKCFsaW5lVGV4dCkgcmV0dXJuIHVuZGVmaW5lZFxuXG4gIGNvbnN0IG1hdGNoZXMgPSBsaW5lVGV4dC5tYXRjaChyZWdleClcblxuICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCAhPT0gMSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2coXCJVbmV4cGVjdGVkIGhlYWRpbmcgZm9ybWF0OiAnXCIgKyBsaW5lVGV4dCArIFwiJ1wiKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGNvbnN0IG1hdGNoID0gbWF0Y2hlcyA/IG1hdGNoZXNbMF0gOiAnJ1xuXG4gIGNvbnN0IGZyb20gPSB7XG4gICAgbGluZTogbGluZU51bWJlcixcbiAgICBjaDogMFxuICB9XG4gIGNvbnN0IHRvID0ge1xuICAgIGxpbmU6IGxpbmVOdW1iZXIsXG4gICAgY2g6IG1hdGNoLmxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIHsgZnJvbSwgdG8gfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2V0dGluZ3NGcm9tRnJvbnRNYXR0ZXJGb3JtYXRQYXJ0KHBhcnQ6IHN0cmluZywgc2V0dGluZ3M6IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3MpOiBOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzIHtcbiAgLy8gUGFyc2UgdGhlIHNlcGFyYXRvclxuICBsZXQgcGFydFdpdGhvdXRTZXBhcmF0b3IgPSBwYXJ0XG4gIGNvbnN0IHBvdGVudGlhbFR3b0NoYXJTZXBhcmF0b3IgPSBwYXJ0LnNsaWNlKC0yKVxuICBpZiAoaXNWYWxpZFNlcGFyYXRvcihwb3RlbnRpYWxUd29DaGFyU2VwYXJhdG9yKSkge1xuICAgIHNldHRpbmdzLnNlcGFyYXRvciA9IHBvdGVudGlhbFR3b0NoYXJTZXBhcmF0b3JcbiAgICBwYXJ0V2l0aG91dFNlcGFyYXRvciA9IHBhcnQuc2xpY2UoMCwgLTIpXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcG90ZW50aWFsT25lQ2hhclNlcGFyYXRvciA9IHBhcnQuc2xpY2UoLTEpXG4gICAgaWYgKGlzVmFsaWRTZXBhcmF0b3IocG90ZW50aWFsT25lQ2hhclNlcGFyYXRvcikpIHtcbiAgICAgIHNldHRpbmdzLnNlcGFyYXRvciA9IHBvdGVudGlhbE9uZUNoYXJTZXBhcmF0b3JcbiAgICAgIHBhcnRXaXRob3V0U2VwYXJhdG9yID0gcGFydC5zbGljZSgwLCAtMSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0dGluZ3Muc2VwYXJhdG9yID0gJydcbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZSB0aGUgbnVtYmVyaW5nIHN0eWxlXG4gIGNvbnN0IGRlc2NyaXB0b3JzID0gcGFydFdpdGhvdXRTZXBhcmF0b3Iuc3BsaXQoJy4nKVxuICBsZXQgZmlyc3ROdW1iZXJlZERlc2NyaXB0b3IgPSAwXG5cbiAgLy8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSBmaXJzdCBkZXNjcmlwdG9yIGlzIGFuIHVuZGVyc2NvcmVcbiAgaWYgKGRlc2NyaXB0b3JzLmxlbmd0aCA+IDEgJiYgZGVzY3JpcHRvcnNbMF0gPT09ICdfJykge1xuICAgIC8vIFRoZSBmaXJzdCBkZXNjcmlwdG9yIGlzIGFuIGluc3RydWN0aW9uIHRvIHNraXAgdG9wIGxldmVscywgc28gc2tpcCB0aGVtXG4gICAgc2V0dGluZ3Muc2tpcFRvcExldmVsID0gdHJ1ZVxuICAgIGZpcnN0TnVtYmVyZWREZXNjcmlwdG9yID0gMVxuICB9IGVsc2Uge1xuICAgIHNldHRpbmdzLnNraXBUb3BMZXZlbCA9IGZhbHNlXG4gIH1cblxuICBpZiAoZGVzY3JpcHRvcnMubGVuZ3RoIC0gZmlyc3ROdW1iZXJlZERlc2NyaXB0b3IgPj0gMikge1xuICAgIGNvbnN0IHN0eWxlTGV2ZWwxID0gZGVzY3JpcHRvcnNbZmlyc3ROdW1iZXJlZERlc2NyaXB0b3JdXG4gICAgaWYgKGlzVmFsaWROdW1iZXJpbmdTdHlsZVN0cmluZyhzdHlsZUxldmVsMSkpIHtcbiAgICAgIHNldHRpbmdzLnN0eWxlTGV2ZWwxID0gc3R5bGVMZXZlbDEgYXMgTnVtYmVyaW5nU3R5bGVcbiAgICB9XG4gICAgY29uc3Qgc3R5bGVMZXZlbE90aGVyID0gZGVzY3JpcHRvcnNbZmlyc3ROdW1iZXJlZERlc2NyaXB0b3IgKyAxXVxuICAgIGlmIChpc1ZhbGlkTnVtYmVyaW5nU3R5bGVTdHJpbmcoc3R5bGVMZXZlbE90aGVyKSkge1xuICAgICAgc2V0dGluZ3Muc3R5bGVMZXZlbE90aGVyID0gc3R5bGVMZXZlbE90aGVyIGFzIE51bWJlcmluZ1N0eWxlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHNldHRpbmdzXG59XG4iLCJpbXBvcnQgeyBDYWNoZWRNZXRhZGF0YSwgRmlsZU1hbmFnZXIsIEZyb250TWF0dGVyQ2FjaGUsIFRGaWxlLCBwYXJzZUZyb250TWF0dGVyRW50cnkgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IE51bWJlcmluZ1N0eWxlIH0gZnJvbSAnLi9udW1iZXJpbmdUb2tlbnMnXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzLCBpc1ZhbGlkQmxvY2tJZFNldHRpbmcsIGlzVmFsaWRGaXJzdE9yTWF4TGV2ZWwsIGlzVmFsaWRGbGFnLCBpc1ZhbGlkTnVtYmVyaW5nU3R5bGVTdHJpbmcsIGlzVmFsaWROdW1iZXJpbmdWYWx1ZVN0cmluZyB9IGZyb20gJy4vc2V0dGluZ3NUeXBlcydcbmltcG9ydCB7IHVwZGF0ZVNldHRpbmdzRnJvbUZyb250TWF0dGVyRm9ybWF0UGFydCB9IGZyb20gJy4vdGV4dFByb2Nlc3NpbmcnXG5cbmNvbnN0IEFVVE9fUEFSVF9LRVkgPSAnYXV0bydcbmNvbnN0IEZJUlNUX0xFVkVMX1BBUlRfS0VZID0gJ2ZpcnN0LWxldmVsJ1xuY29uc3QgTUFYX0xFVkVMX1BBUlRfS0VZID0gJ21heCdcbmNvbnN0IENPTlRFTlRTX1BBUlRfS0VZID0gJ2NvbnRlbnRzJ1xuY29uc3QgU0tJUF9QQVJUX0tFWSA9ICdza2lwJ1xuY29uc3QgU1RBUlRfQVRfUEFSVF9LRVkgPSAnc3RhcnQtYXQnXG5jb25zdCBPRkZfUEFSVF9LRVkgPSAnb2ZmJ1xuXG5mdW5jdGlvbiBwYXJzZUNvbXBhY3RGcm9udE1hdHRlclNldHRpbmdzKGZtOiBGcm9udE1hdHRlckNhY2hlKTogTnVtYmVySGVhZGluZ3NQbHVnaW5TZXR0aW5ncyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IGVudHJ5ID0gcGFyc2VGcm9udE1hdHRlckVudHJ5KGZtLCAnbnVtYmVyIGhlYWRpbmdzJylcbiAgaWYgKGVudHJ5KSB7XG4gICAgY29uc3QgZW50cnlTdHJpbmcgPSBTdHJpbmcoZW50cnkpXG4gICAgY29uc3QgcGFydHMgPSBlbnRyeVN0cmluZy5zcGxpdCgnLCcpXG4gICAgbGV0IHNldHRpbmdzOiBOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzID0geyAuLi5ERUZBVUxUX1NFVFRJTkdTIH1cblxuICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgY29uc3QgdHJpbW1lZFBhcnQgPSBwYXJ0LnRyaW0oKVxuICAgICAgaWYgKHRyaW1tZWRQYXJ0Lmxlbmd0aCA9PT0gMCkgY29udGludWVcblxuICAgICAgaWYgKHRyaW1tZWRQYXJ0ID09PSBPRkZfUEFSVF9LRVkpIHtcbiAgICAgICAgLy8gUGFyc2Ugb2ZmIHBhcnRcbiAgICAgICAgc2V0dGluZ3Mub2ZmID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmICh0cmltbWVkUGFydCA9PT0gQVVUT19QQVJUX0tFWSkge1xuICAgICAgICAvLyBQYXJzZSBhdXRvIG51bWJlcmluZyBwYXJ0XG4gICAgICAgIHNldHRpbmdzLmF1dG8gPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKHRyaW1tZWRQYXJ0LnN0YXJ0c1dpdGgoRklSU1RfTEVWRUxfUEFSVF9LRVkpKSB7XG4gICAgICAgIC8vIFBhcnNlIGZpcnN0IGxldmVsIHBhcnRcbiAgICAgICAgY29uc3QgbnN0cmluZyA9IHRyaW1tZWRQYXJ0LnN1YnN0cmluZyhGSVJTVF9MRVZFTF9QQVJUX0tFWS5sZW5ndGggKyAxKVxuICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQobnN0cmluZylcbiAgICAgICAgaWYgKGlzVmFsaWRGaXJzdE9yTWF4TGV2ZWwobikpIHtcbiAgICAgICAgICBzZXR0aW5ncy5maXJzdExldmVsID0gblxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyaW1tZWRQYXJ0LnN0YXJ0c1dpdGgoTUFYX0xFVkVMX1BBUlRfS0VZKSkge1xuICAgICAgICAvLyBQYXJzZSBtYXggbGV2ZWwgcGFydFxuICAgICAgICBjb25zdCBuc3RyaW5nID0gdHJpbW1lZFBhcnQuc3Vic3RyaW5nKE1BWF9MRVZFTF9QQVJUX0tFWS5sZW5ndGggKyAxKVxuICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQobnN0cmluZylcbiAgICAgICAgaWYgKGlzVmFsaWRGaXJzdE9yTWF4TGV2ZWwobikpIHtcbiAgICAgICAgICBzZXR0aW5ncy5tYXhMZXZlbCA9IG5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0cmltbWVkUGFydC5zdGFydHNXaXRoKFNUQVJUX0FUX1BBUlRfS0VZKSkge1xuICAgICAgICAvLyBQYXJzZSBcInN0YXJ0IGF0XCIgcGFydFxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRyaW1tZWRQYXJ0LnN1YnN0cmluZyhTVEFSVF9BVF9QQVJUX0tFWS5sZW5ndGggKyAxKVxuICAgICAgICBpZiAoaXNWYWxpZE51bWJlcmluZ1ZhbHVlU3RyaW5nKHZhbHVlKSkge1xuICAgICAgICAgIHNldHRpbmdzLnN0YXJ0QXQgPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyaW1tZWRQYXJ0LnN0YXJ0c1dpdGgoQ09OVEVOVFNfUEFSVF9LRVkpKSB7XG4gICAgICAgIGlmICh0cmltbWVkUGFydC5sZW5ndGggPD0gQ09OVEVOVFNfUEFSVF9LRVkubGVuZ3RoICsgMSkgY29udGludWVcbiAgICAgICAgLy8gUGFyc2UgY29udGVudHMgaGVhZGluZyBwYXJ0XG4gICAgICAgIGNvbnN0IHRvY0hlYWRpbmdCbG9ja0lkTmFtZSA9IHRyaW1tZWRQYXJ0LnN1YnN0cmluZyhDT05URU5UU19QQVJUX0tFWS5sZW5ndGggKyAxKVxuICAgICAgICBpZiAoaXNWYWxpZEJsb2NrSWRTZXR0aW5nKHRvY0hlYWRpbmdCbG9ja0lkTmFtZSkpIHtcbiAgICAgICAgICBzZXR0aW5ncy5jb250ZW50cyA9IHRvY0hlYWRpbmdCbG9ja0lkTmFtZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRyaW1tZWRQYXJ0LnN0YXJ0c1dpdGgoU0tJUF9QQVJUX0tFWSkpIHtcbiAgICAgICAgaWYgKHRyaW1tZWRQYXJ0Lmxlbmd0aCA8PSBTS0lQX1BBUlRfS0VZLmxlbmd0aCArIDEpIGNvbnRpbnVlXG4gICAgICAgIC8vIFBhcnNlIHNraXAgaGVhZGluZyBwYXJ0XG4gICAgICAgIGNvbnN0IHNraXBIZWFkaW5nQmxvY2tJZE5hbWUgPSB0cmltbWVkUGFydC5zdWJzdHJpbmcoU0tJUF9QQVJUX0tFWS5sZW5ndGggKyAxKVxuICAgICAgICBpZiAoaXNWYWxpZEJsb2NrSWRTZXR0aW5nKHNraXBIZWFkaW5nQmxvY2tJZE5hbWUpKSB7XG4gICAgICAgICAgc2V0dGluZ3Muc2tpcEhlYWRpbmdzID0gc2tpcEhlYWRpbmdCbG9ja0lkTmFtZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQYXJzZSBmb3JtYXR0aW5nIHBhcnRcbiAgICAgICAgc2V0dGluZ3MgPSB1cGRhdGVTZXR0aW5nc0Zyb21Gcm9udE1hdHRlckZvcm1hdFBhcnQodHJpbW1lZFBhcnQsIHNldHRpbmdzKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZXR0aW5nc1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZFxufVxuXG5leHBvcnQgY29uc3QgZ2V0RnJvbnRNYXR0ZXJTZXR0aW5nc09yQWx0ZXJuYXRpdmUgPSAoXG4gIHsgZnJvbnRtYXR0ZXIgfTogQ2FjaGVkTWV0YWRhdGEsXG4gIGFsdGVybmF0aXZlU2V0dGluZ3M6IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3Ncbik6IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3MgPT4ge1xuICBpZiAoZnJvbnRtYXR0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGRlY29tcGFjdGVkU2V0dGluZ3MgPSBwYXJzZUNvbXBhY3RGcm9udE1hdHRlclNldHRpbmdzKGZyb250bWF0dGVyKVxuICAgIGlmIChkZWNvbXBhY3RlZFNldHRpbmdzICE9PSB1bmRlZmluZWQpIHJldHVybiBkZWNvbXBhY3RlZFNldHRpbmdzXG5cbiAgICAvLyBOT1RFOiBFdmVyeXRoaW5nIGJlbG93IGlzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBvbmx5XG5cbiAgICBjb25zdCBza2lwVG9wTGV2ZWxFbnRyeSA9IHBhcnNlRnJvbnRNYXR0ZXJFbnRyeShmcm9udG1hdHRlciwgJ251bWJlci1oZWFkaW5ncy1za2lwLXRvcC1sZXZlbCcpID8/IHBhcnNlRnJvbnRNYXR0ZXJFbnRyeShmcm9udG1hdHRlciwgJ2hlYWRlci1udW1iZXJpbmctc2tpcC10b3AtbGV2ZWwnKVxuICAgIGNvbnN0IHNraXBUb3BMZXZlbCA9IGlzVmFsaWRGbGFnKHNraXBUb3BMZXZlbEVudHJ5KSA/IHNraXBUb3BMZXZlbEVudHJ5IDogYWx0ZXJuYXRpdmVTZXR0aW5ncy5za2lwVG9wTGV2ZWxcblxuICAgIGNvbnN0IG1heExldmVsRW50cnkgPSBwYXJzZUZyb250TWF0dGVyRW50cnkoZnJvbnRtYXR0ZXIsICdudW1iZXItaGVhZGluZ3MtbWF4LWxldmVsJykgPz8gcGFyc2VGcm9udE1hdHRlckVudHJ5KGZyb250bWF0dGVyLCAnaGVhZGVyLW51bWJlcmluZy1tYXgtbGV2ZWwnKVxuICAgIGNvbnN0IG1heExldmVsID0gaXNWYWxpZEZpcnN0T3JNYXhMZXZlbChtYXhMZXZlbEVudHJ5KSA/IG1heExldmVsRW50cnkgOiBhbHRlcm5hdGl2ZVNldHRpbmdzLm1heExldmVsXG5cbiAgICBjb25zdCBzdHlsZUxldmVsMUVudHJ5ID0gU3RyaW5nKFxuICAgICAgcGFyc2VGcm9udE1hdHRlckVudHJ5KGZyb250bWF0dGVyLCAnbnVtYmVyLWhlYWRpbmdzLXN0eWxlLWxldmVsLTEnKSA/P1xuICAgICAgcGFyc2VGcm9udE1hdHRlckVudHJ5KGZyb250bWF0dGVyLCAnaGVhZGVyLW51bWJlcmluZy1zdHlsZS1sZXZlbC0xJylcbiAgICApXG4gICAgY29uc3Qgc3R5bGVMZXZlbDE6IE51bWJlcmluZ1N0eWxlID0gaXNWYWxpZE51bWJlcmluZ1N0eWxlU3RyaW5nKHN0eWxlTGV2ZWwxRW50cnkpID8gc3R5bGVMZXZlbDFFbnRyeSBhcyBOdW1iZXJpbmdTdHlsZSA6IGFsdGVybmF0aXZlU2V0dGluZ3Muc3R5bGVMZXZlbDFcblxuICAgIGNvbnN0IHN0eWxlTGV2ZWxPdGhlckVudHJ5ID0gU3RyaW5nKFxuICAgICAgcGFyc2VGcm9udE1hdHRlckVudHJ5KGZyb250bWF0dGVyLCAnbnVtYmVyLWhlYWRpbmdzLXN0eWxlLWxldmVsLW90aGVyJykgPz9cbiAgICAgIHBhcnNlRnJvbnRNYXR0ZXJFbnRyeShmcm9udG1hdHRlciwgJ2hlYWRlci1udW1iZXJpbmctc3R5bGUtbGV2ZWwtb3RoZXInKVxuICAgIClcbiAgICBjb25zdCBzdHlsZUxldmVsT3RoZXI6IE51bWJlcmluZ1N0eWxlID0gaXNWYWxpZE51bWJlcmluZ1N0eWxlU3RyaW5nKHN0eWxlTGV2ZWxPdGhlckVudHJ5KSA/IHN0eWxlTGV2ZWxPdGhlckVudHJ5IGFzIE51bWJlcmluZ1N0eWxlIDogYWx0ZXJuYXRpdmVTZXR0aW5ncy5zdHlsZUxldmVsT3RoZXJcblxuICAgIGNvbnN0IGF1dG9FbnRyeSA9IHBhcnNlRnJvbnRNYXR0ZXJFbnRyeShmcm9udG1hdHRlciwgJ251bWJlci1oZWFkaW5ncy1hdXRvJykgPz8gcGFyc2VGcm9udE1hdHRlckVudHJ5KGZyb250bWF0dGVyLCAnaGVhZGVyLW51bWJlcmluZy1hdXRvJylcbiAgICBjb25zdCBhdXRvID0gaXNWYWxpZEZsYWcoYXV0b0VudHJ5KSA/IGF1dG9FbnRyeSA6IGFsdGVybmF0aXZlU2V0dGluZ3MuYXV0b1xuXG4gICAgcmV0dXJuIHsgLi4uYWx0ZXJuYXRpdmVTZXR0aW5ncywgc2tpcFRvcExldmVsLCBtYXhMZXZlbCwgc3R5bGVMZXZlbDEsIHN0eWxlTGV2ZWxPdGhlciwgYXV0byB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFsdGVybmF0aXZlU2V0dGluZ3NcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXR0aW5nc1RvQ29tcGFjdEZyb250TWF0dGVyVmFsdWUoc2V0dGluZ3M6IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3MpOiBzdHJpbmcge1xuICBpZiAoc2V0dGluZ3Mub2ZmKSByZXR1cm4gT0ZGX1BBUlRfS0VZXG5cbiAgY29uc3QgYXV0b1BhcnQgPSBzZXR0aW5ncy5hdXRvID8gJ2F1dG8sICcgOiAnJ1xuICBjb25zdCBmaXJzdExldmVsUGFydCA9IGBmaXJzdC1sZXZlbCAke3NldHRpbmdzLmZpcnN0TGV2ZWx9LCBgXG4gIGNvbnN0IG1heFBhcnQgPSBgbWF4ICR7c2V0dGluZ3MubWF4TGV2ZWx9LCBgXG4gIGNvbnN0IGNvbnRlbnRzUGFydCA9IHNldHRpbmdzLmNvbnRlbnRzICYmIHNldHRpbmdzLmNvbnRlbnRzLmxlbmd0aCA+IDAgPyBgY29udGVudHMgJHtzZXR0aW5ncy5jb250ZW50c30sIGAgOiAnJ1xuICBjb25zdCBza2lwSGVhZGluZ3NQYXJ0ID0gc2V0dGluZ3Muc2tpcEhlYWRpbmdzICYmIHNldHRpbmdzLnNraXBIZWFkaW5ncy5sZW5ndGggPiAwID8gYHNraXAgJHtzZXR0aW5ncy5za2lwSGVhZGluZ3N9LCBgIDogJydcbiAgY29uc3Qgc2tpcFRvcExldmVsU3RyaW5nID0gc2V0dGluZ3Muc2tpcFRvcExldmVsID8gJ18uJyA6ICcnXG4gIGNvbnN0IHN0eWxlUGFydCA9IGAke3NraXBUb3BMZXZlbFN0cmluZ30ke3NldHRpbmdzLnN0eWxlTGV2ZWwxfS4ke3NldHRpbmdzLnN0eWxlTGV2ZWxPdGhlcn0ke3NldHRpbmdzLnNlcGFyYXRvcn1gXG4gIGNvbnN0IHN0YXJ0QXRQYXJ0ID0gc2V0dGluZ3Muc3RhcnRBdCAhPT0gJycgPyBgc3RhcnQtYXQgJHtzZXR0aW5ncy5zdGFydEF0fSwgYCA6ICcnXG4gIHJldHVybiBhdXRvUGFydCArIGZpcnN0TGV2ZWxQYXJ0ICsgbWF4UGFydCArIGNvbnRlbnRzUGFydCArIHNraXBIZWFkaW5nc1BhcnQgKyBzdGFydEF0UGFydCArIHN0eWxlUGFydFxufVxuXG5leHBvcnQgY29uc3Qgc2F2ZVNldHRpbmdzVG9Gcm9udE1hdHRlciA9IChcbiAgZmlsZU1hbmFnZXI6IEZpbGVNYW5hZ2VyLFxuICBmaWxlOiBURmlsZSxcbiAgc2V0dGluZ3M6IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3Ncbik6IHZvaWQgPT4ge1xuICBmaWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgIGNvbnN0IHY6IHN0cmluZyA9IHNldHRpbmdzVG9Db21wYWN0RnJvbnRNYXR0ZXJWYWx1ZShzZXR0aW5ncylcbiAgICBmcm9udG1hdHRlclsnbnVtYmVyIGhlYWRpbmdzJ10gPSB2XG4gIH0pXG59XG4iLCJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQgeyBzYXZlU2V0dGluZ3NUb0Zyb250TWF0dGVyIH0gZnJvbSAnLi9mcm9udE1hdHRlcidcbmltcG9ydCB7IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzVHlwZXMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgTnVtYmVyaW5nRG9uZUNvbmZpZyB7XG4gIG1lc3NhZ2U6IHN0cmluZ1xuICBwcmVmb3JtYXR0ZWRNZXNzYWdlOiBzdHJpbmdcbiAgc2F2ZVNldHRpbmdzQ2FsbGJhY2s6IChzaG91bGRBZGRBdXRvRmxhZzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5jbGFzcyBOdW1iZXJpbmdEb25lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbmZpZzogTnVtYmVyaW5nRG9uZUNvbmZpZ1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBjb25maWc6IE51bWJlcmluZ0RvbmVDb25maWcpIHtcbiAgICBzdXBlcihhcHApXG4gICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgfVxuXG4gIG9uT3BlbigpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCwgdGl0bGVFbCB9ID0gdGhpc1xuICAgIHRpdGxlRWwuc2V0VGV4dCgnTnVtYmVyIEhlYWRpbmdzIC0gU3VjY2Vzc2Z1bGx5IENvbXBsZXRlZCcpXG5cbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogdGhpcy5jb25maWcubWVzc2FnZSB9KVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncHJlJywgeyB0ZXh0OiB0aGlzLmNvbmZpZy5wcmVmb3JtYXR0ZWRNZXNzYWdlIH0pXG5cbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogXCJEbyB5b3Ugd2FudCB0byBzYXZlIHRoZXNlIHNldHRpbmdzIGluIHRoZSBkb2N1bWVudCdzIGZyb250IG1hdHRlcj9cIiwgY2xzOiAnbnVtYmVyLWhlYWRpbmdzLXF1ZXN0aW9uJyB9KVxuXG4gICAgY29uc3QgY29udGFpbmVyRm9yQnV0dG9ucyA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdudW1iZXItaGVhZGluZ3MtYnV0dG9uLWNvbnRhaW5lcicgfSlcblxuICAgIGNvbnN0IG5vQnV0dG9uID0gY29udGFpbmVyRm9yQnV0dG9ucy5jcmVhdGVFbCgnYnV0dG9uJywge30pXG4gICAgbm9CdXR0b24uc2V0VGV4dCgnTm8nKVxuICAgIG5vQnV0dG9uLm9uQ2xpY2tFdmVudCgoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgcmV0dXJuIGV2XG4gICAgfSlcblxuICAgIGNvbnN0IHllc0J1dHRvbiA9IGNvbnRhaW5lckZvckJ1dHRvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHt9KVxuICAgIHllc0J1dHRvbi5zZXRUZXh0KCdZZXMsIHNhdmUgc2V0dGluZ3MgaW4gZG9jdW1lbnQnKVxuICAgIHllc0J1dHRvbi5vbkNsaWNrRXZlbnQoKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbmZpZy5zYXZlU2V0dGluZ3NDYWxsYmFjayhmYWxzZSlcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgcmV0dXJuIGV2XG4gICAgfSlcblxuICAgIGNvbnN0IHllc0FuZEF1dG9CdXR0b24gPSBjb250YWluZXJGb3JCdXR0b25zLmNyZWF0ZUVsKCdidXR0b24nLCB7fSlcbiAgICB5ZXNBbmRBdXRvQnV0dG9uLnNldFRleHQoJ1llcywgc2F2ZSBzZXR0aW5ncyBpbiBkb2N1bWVudCwgYW5kIGF1dG9tYXRpY2FsbHkgbnVtYmVyJylcbiAgICB5ZXNBbmRBdXRvQnV0dG9uLm9uQ2xpY2tFdmVudCgoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29uZmlnLnNhdmVTZXR0aW5nc0NhbGxiYWNrKHRydWUpXG4gICAgICB0aGlzLmNsb3NlKClcbiAgICAgIHJldHVybiBldlxuICAgIH0pXG4gIH1cblxuICBvbkNsb3NlKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGVudEVsLCB0aXRsZUVsIH0gPSB0aGlzXG4gICAgY29udGVudEVsLmVtcHR5KClcbiAgICB0aXRsZUVsLmVtcHR5KClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd051bWJlcmluZ0RvbmVNZXNzYWdlKGFwcDogQXBwLCBzZXR0aW5nczogTnVtYmVySGVhZGluZ3NQbHVnaW5TZXR0aW5ncyk6IHZvaWQge1xuICBjb25zdCBzYXZlU2V0dGluZ3NDYWxsYmFjayA9IChzaG91bGRBZGRBdXRvRmxhZzogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHR3ZWFrZWRTZXR0aW5ncyA9IHsgLi4uc2V0dGluZ3MgfVxuICAgIGlmIChzaG91bGRBZGRBdXRvRmxhZykgdHdlYWtlZFNldHRpbmdzLmF1dG8gPSB0cnVlXG4gICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIHNhdmVTZXR0aW5nc1RvRnJvbnRNYXR0ZXIoYXBwLmZpbGVNYW5hZ2VyLCBmaWxlLCB0d2Vha2VkU2V0dGluZ3MpXG4gICAgfVxuICB9XG4gIGNvbnN0IGNvbmZpZzogTnVtYmVyaW5nRG9uZUNvbmZpZyA9IHtcbiAgICBtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgYWxsIGhlYWRpbmcgbnVtYmVycyBpbiB0aGUgZG9jdW1lbnQsIHVzaW5nIHRoZSBzZXR0aW5ncyBiZWxvdy4gXG4gICAgICBTZWUgc2V0dGluZ3MgcGFuZWwgdG8gY2hhbmdlIGhvdyBoZWFkaW5ncyBhcmUgbnVtYmVyZWQsIG9yIHVzZSBmcm9udCBtYXR0ZXJcbiAgICAgIChzZWUgc2V0dGluZ3MgcGFuZWwpLmAsXG4gICAgcHJlZm9ybWF0dGVkTWVzc2FnZTogYFNraXAgdG9wIGhlYWRpbmcgbGV2ZWw6ICR7c2V0dGluZ3Muc2tpcFRvcExldmVsfVxuRmlyc3QgaGVhZGluZyBsZXZlbDogJHtzZXR0aW5ncy5maXJzdExldmVsfVxuU3RhcnQgbnVtYmVyaW5nIGZpcnN0IGhlYWRpbmcgYXQ6ICR7c2V0dGluZ3Muc3RhcnRBdH1cbk1heGltdW0gaGVhZGluZyBsZXZlbDogJHtzZXR0aW5ncy5tYXhMZXZlbH1cblN0eWxlIGZvciBsZXZlbCAxIGhlYWRpbmdzOiAke3NldHRpbmdzLnN0eWxlTGV2ZWwxfVxuU3R5bGUgZm9yIGxvd2VyIGxldmVsIGhlYWRpbmdzIChiZWxvdyBsZXZlbCAxKTogJHtzZXR0aW5ncy5zdHlsZUxldmVsT3RoZXJ9XG5TZXBhcmF0b3I6ICR7c2V0dGluZ3Muc2VwYXJhdG9yfVxuVGFibGUgb2YgQ29udGVudHMgQW5jaG9yOiAke3NldHRpbmdzLmNvbnRlbnRzfVxuU2tpcCBIZWFkaW5ncyBBbmNob3I6ICR7c2V0dGluZ3Muc2tpcEhlYWRpbmdzfWAsXG4gICAgc2F2ZVNldHRpbmdzQ2FsbGJhY2tcbiAgfVxuXG4gIGNvbnN0IGxlYWYgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWZcbiAgaWYgKGxlYWYpIHtcbiAgICBuZXcgTnVtYmVyaW5nRG9uZU1vZGFsKGFwcCwgY29uZmlnKS5vcGVuKClcbiAgfVxufVxuIiwiaW1wb3J0IHsgRWRpdG9yLCBFZGl0b3JDaGFuZ2UsIEVkaXRvclJhbmdlLCBIZWFkaW5nQ2FjaGUgfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IFZpZXdJbmZvIH0gZnJvbSAnLi9hY3RpdmVWaWV3SGVscGVycydcbmltcG9ydCB7IE51bWJlcmluZ1Rva2VuLCBmaXJzdE51bWJlcmluZ1Rva2VuSW5TdHlsZSwgbWFrZU51bWJlcmluZ1N0cmluZywgbmV4dE51bWJlcmluZ1Rva2VuLCBzdGFydEF0T3JaZXJvdGhJblN0eWxlIH0gZnJvbSAnLi9udW1iZXJpbmdUb2tlbnMnXG5pbXBvcnQgeyBOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzLCBpc05vbkVtcHR5QmxvY2tJZCB9IGZyb20gJy4vc2V0dGluZ3NUeXBlcydcbmltcG9ydCB7IFN1cHBvcnRGbGFncywgY3JlYXRlU3VwcG9ydEZsYWdzRnJvbVNldHRpbmdzLCBmaW5kUmFuZ2VJbkhlYWRlclN0cmluZyB9IGZyb20gJy4vdGV4dFByb2Nlc3NpbmcnXG5cbmNvbnN0IFRPQ19MSVNUX0lURU1fQlVMTEVUID0gJy0nXG5cblxuaW50ZXJmYWNlIEhlYWRpbmdUZXh0IHtcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgY2xlYW5UZXh0OiBzdHJpbmdcbn1cblxuZnVuY3Rpb24gbWFrZUhlYWRpbmdIYXNoU3RyaW5nKGVkaXRvcjogRWRpdG9yLCBoZWFkaW5nOiBIZWFkaW5nQ2FjaGUpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCByZWdleCA9IC9eXFxzezAsNH0jKy9nXG4gIGNvbnN0IGhlYWRpbmdMaW5lU3RyaW5nID0gZWRpdG9yLmdldExpbmUoaGVhZGluZy5wb3NpdGlvbi5zdGFydC5saW5lKVxuICBpZiAoIWhlYWRpbmdMaW5lU3RyaW5nKSByZXR1cm4gdW5kZWZpbmVkXG5cbiAgY29uc3QgbWF0Y2hlcyA9IGhlYWRpbmdMaW5lU3RyaW5nLm1hdGNoKHJlZ2V4KVxuICBpZiAoIW1hdGNoZXMpIHJldHVybiB1bmRlZmluZWRcblxuICBpZiAobWF0Y2hlcy5sZW5ndGggIT09IDEpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKFwiVW5leHBlY3RlZCBoZWFkaW5nIGZvcm1hdDogJ1wiICsgaGVhZGluZ0xpbmVTdHJpbmcgKyBcIidcIilcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBtYXRjaCA9IG1hdGNoZXNbMF1cbiAgcmV0dXJuIG1hdGNoLnRyaW1MZWZ0KClcbn1cblxuZnVuY3Rpb24gZmluZEhlYWRpbmdQcmVmaXhSYW5nZShlZGl0b3I6IEVkaXRvciwgaGVhZGluZzogSGVhZGluZ0NhY2hlLCBmbGFnczogU3VwcG9ydEZsYWdzKTogRWRpdG9yUmFuZ2UgfCB1bmRlZmluZWQge1xuICBjb25zdCBsaW5lTnVtYmVyID0gaGVhZGluZy5wb3NpdGlvbi5zdGFydC5saW5lXG4gIGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUobGluZU51bWJlcilcbiAgcmV0dXJuIGZpbmRSYW5nZUluSGVhZGVyU3RyaW5nKGxpbmVUZXh0LCBsaW5lTnVtYmVyLCBmbGFncylcbn1cblxuZnVuY3Rpb24gY2xlYW5IZWFkaW5nVGV4dEZvclRvYyhodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGh0ZXh0LmNvbnRhaW5zKCdeJykpIHtcbiAgICBjb25zdCB4ID0gaHRleHQuc3BsaXQoJ14nKVxuICAgIGlmICh4Lmxlbmd0aCA+IDEpIHtcbiAgICAgIHJldHVybiB4WzBdLnRyaW0oKVxuICAgIH1cbiAgfVxuICByZXR1cm4gaHRleHQudHJpbSgpXG59XG5cbmZ1bmN0aW9uIGNsZWFuV2lraUxpbmsobmV3VGV4dDogc3RyaW5nLCB1c2VfZGlzcGxheV90ZXh0OiBib29sZWFuKTogc3RyaW5nIHtcbiAgaWYgKG5ld1RleHQuc3RhcnRzV2l0aCgnW1snKSAmJiBuZXdUZXh0LmVuZHNXaXRoKCddXScpKSB7XG4gICAgbmV3VGV4dCA9IG5ld1RleHQucmVwbGFjZSgnW1snLCAnJylcbiAgICBuZXdUZXh0ID0gbmV3VGV4dC5yZXBsYWNlKCddXScsICcnKVxuXG4gICAgLy8gSWYgdGhlIGxpbmsgaGFzIGRpc3BsYXkgdGV4dCB1c2UgdGhhdC5cbiAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcblxuICB9IFxuXG4gIHJldHVybiBuZXdUZXh0XG59XG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVyVGV4dChodGV4dDogc3RyaW5nKTogSGVhZGluZ1RleHQge1xuICBsZXQgc3RyaW5nQXJyYXkgPSBbXVxuICBsZXQgbGlua1RleHQgPSBcIlwiXG4gIGxldCBkaXNwbGF5VGV4dCA9IFwiXCJcblxuICAvLyBzdG9yZSB0aGUgZ2VuZXJhdGVkIGhlYWRpbmcgbnVtYmVyXG4gIGxldCBpID0gaHRleHQuc3BsaXQoJyAnKTtcblxuICBpZiAoaS5sZW5ndGggPiAxKSB7XG4gICAgc3RyaW5nQXJyYXkucHVzaChpLnNoaWZ0KCkpXG4gIH1cblxuICBodGV4dCA9IGkuam9pbignICcpXG5cbiAgbGlua1RleHQgPSBjbGVhbldpa2lMaW5rKGh0ZXh0LCBmYWxzZSlcbiAgaWYgKGxpbmtUZXh0LmNvbnRhaW5zKCd8JykpIHtcbiAgICBjb25zdCBqID0gbGlua1RleHQuc3BsaXQoJ3wnKVxuICAgIGxpbmtUZXh0ID0gbGlua1RleHQucmVwbGFjZSgnfCcsICcgJylcbiAgICBkaXNwbGF5VGV4dCA9IGpbMV1cbiAgfVxuICBlbHNlIHtcbiAgICBkaXNwbGF5VGV4dCA9IGxpbmtUZXh0XG4gIH1cblxuICBpZiAobGlua1RleHQuY29udGFpbnMoJyMnKSkge1xuICAgIGxpbmtUZXh0ID0gbGlua1RleHQucmVwbGFjZSgnIycsICcgJylcbiAgfVxuXG4gIGlmIChkaXNwbGF5VGV4dC5jb250YWlucygnIycpKSB7XG4gICAgZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dC5yZXBsYWNlKCcjJywgJyA+ICcpXG4gIH1cblxuICBsZXQgayA9IGxpbmtUZXh0LnNwbGl0KCcgJylcbiAgc3RyaW5nQXJyYXkgPSBzdHJpbmdBcnJheS5jb25jYXQoaylcbiAgbGlua1RleHQgPSBzdHJpbmdBcnJheS5qb2luKCcgJylcblxuICByZXR1cm4ge1xuICAgICAgdGV4dDogY2xlYW5IZWFkaW5nVGV4dEZvclRvYyhsaW5rVGV4dCksXG4gICAgICBjbGVhblRleHQ6IGNsZWFuSGVhZGluZ1RleHRGb3JUb2MoZGlzcGxheVRleHQpXG4gIH1cbn1cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuZnVuY3Rpb24gY3JlYXRlVG9jRW50cnkoaDogSGVhZGluZ0NhY2hlLCBzZXR0aW5nczogTnVtYmVySGVhZGluZ3NQbHVnaW5TZXR0aW5ncywgaW5pdGlhbEhlYWRpbmdMZXZlbDogbnVtYmVyKTogc3RyaW5nIHtcbiAgLy8gQ2hlY2sgdGhhdCBoLmhlYWRpbmcgaXMgYSBsaW5rIGluIFtbXV0gZm9ybWF0LlxuICBjb25zdCBoZWFkZXJUZXh0ID0gcGFyc2VIZWFkZXJUZXh0KGguaGVhZGluZyk7XG5cbiAgbGV0IGJ1bGxldEluZGVudCA9ICcnXG4gIGNvbnN0IHN0YXJ0TGV2ZWwgPSBpbml0aWFsSGVhZGluZ0xldmVsXG4gIGZvciAobGV0IGkgPSBzdGFydExldmVsOyBpIDwgaC5sZXZlbDsgaSsrKSB7XG4gICAgYnVsbGV0SW5kZW50ICs9ICdcXHQnXG4gIH1cblxuICBjb25zdCBlbnRyeUxpbmsgPSBgW1sjJHtoZWFkZXJUZXh0LnRleHR9fCR7aGVhZGVyVGV4dC5jbGVhblRleHR9XV1gXG5cbiAgcmV0dXJuIGJ1bGxldEluZGVudCArIFRPQ19MSVNUX0lURU1fQlVMTEVUICsgJyAnICsgZW50cnlMaW5rXG59XG5cbi8vIFJlcGxhY2UgYSByYW5nZSwgYnV0IG9ubHkgaWYgdGhlcmUgaXMgYSBjaGFuZ2UgaW4gdGV4dCwgdG8gcHJldmVudCBwb2x1dGluZyB0aGUgdW5kbyBzdGFja1xuZnVuY3Rpb24gcmVwbGFjZVJhbmdlRWNvbm9taWNhbGx5KGVkaXRvcjogRWRpdG9yLCBjaGFuZ2VzOiBFZGl0b3JDaGFuZ2VbXSwgcmFuZ2U6IEVkaXRvclJhbmdlLCB0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgY29uc3QgcHJldmlvdXNUZXh0ID0gZWRpdG9yLmdldFJhbmdlKHJhbmdlLmZyb20sIHJhbmdlLnRvKVxuXG4gIGlmIChwcmV2aW91c1RleHQgIT09IHRleHQpIHtcbiAgICBjaGFuZ2VzLnB1c2goe1xuICAgICAgdGV4dDogdGV4dCxcbiAgICAgIGZyb206IHJhbmdlLmZyb20sXG4gICAgICB0bzogcmFuZ2UudG9cbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVIZWFkaW5nTnVtYmVyaW5nID0gKFxuICB2aWV3SW5mbzogVmlld0luZm8gfCB1bmRlZmluZWQsXG4gIHNldHRpbmdzOiBOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzXG4pOiB2b2lkID0+IHtcbiAgaWYgKCF2aWV3SW5mbykgcmV0dXJuXG4gIGNvbnN0IGhlYWRpbmdzID0gdmlld0luZm8uZGF0YS5oZWFkaW5ncyA/PyBbXVxuICBjb25zdCBlZGl0b3IgPSB2aWV3SW5mby5lZGl0b3JcbiAgY29uc3Qgc3VwcG9ydEZsYWdzID0gY3JlYXRlU3VwcG9ydEZsYWdzRnJvbVNldHRpbmdzKHNldHRpbmdzLnN0eWxlTGV2ZWwxLCBzZXR0aW5ncy5zdHlsZUxldmVsT3RoZXIpXG5cbiAgbGV0IHByZXZpb3VzTGV2ZWwgPSAxXG5cbiAgbGV0IG51bWJlcmluZ1N0YWNrOiBOdW1iZXJpbmdUb2tlbltdID0gW3N0YXJ0QXRPclplcm90aEluU3R5bGUoc2V0dGluZ3Muc3RhcnRBdCwgc2V0dGluZ3Muc3R5bGVMZXZlbDEpXVxuXG4gIGlmIChzZXR0aW5ncy5maXJzdExldmVsID4gMSkge1xuICAgIHByZXZpb3VzTGV2ZWwgPSBzZXR0aW5ncy5maXJzdExldmVsXG4gIH0gZWxzZSBpZiAoc2V0dGluZ3Muc2tpcFRvcExldmVsKSB7XG4gICAgcHJldmlvdXNMZXZlbCA9IDJcbiAgfVxuXG4gIGNvbnN0IGNoYW5nZXM6IEVkaXRvckNoYW5nZVtdID0gW11cblxuICBmb3IgKGNvbnN0IGhlYWRpbmcgb2YgaGVhZGluZ3MpIHtcbiAgICAvLyBVcGRhdGUgdGhlIG51bWJlcmluZyBzdGFjayBiYXNlZCBvbiB0aGUgbGV2ZWwgYW5kIHByZXZpb3VzIGxldmVsXG5cbiAgICBjb25zdCBsZXZlbCA9IGhlYWRpbmcubGV2ZWxcblxuICAgIC8vIEhhbmRsZSBza2lwcGVkICYgaWdub3JlZCBsZXZlbHMuXG4gICAgaWYgKChzZXR0aW5ncy5maXJzdExldmVsID4gbGV2ZWwpIHx8IChzZXR0aW5ncy5za2lwVG9wTGV2ZWwgJiYgbGV2ZWwgPT09IDEpKSB7XG4gICAgICAvLyBSZXNldHMgdGhlIG51bWJlcmluZyB3aGVuIGEgbGV2ZWwgaXMgc2tpcHBlZC5cbiAgICAgIC8vIE5vdGU6IFRoaXMgbGVhdmVzIGhlYWRpbmdzIGFzIHRoZXkgYXJlLCBhbGxvd2luZyBwZW9wbGUgdG8gaGF2ZSBudW1iZXJzIGF0IHRoZSBzdGFydCBvZlxuICAgICAgLy8gaWdub3JlZCBoZWFkaW5ncy5cblxuICAgICAgbnVtYmVyaW5nU3RhY2sgPSBbc3RhcnRBdE9yWmVyb3RoSW5TdHlsZShzZXR0aW5ncy5zdGFydEF0LCBzZXR0aW5ncy5zdHlsZUxldmVsMSldXG5cbiAgICAgIGlmIChzZXR0aW5ncy5maXJzdExldmVsID4gMSkge1xuICAgICAgICBwcmV2aW91c0xldmVsID0gc2V0dGluZ3MuZmlyc3RMZXZlbFxuICAgICAgfSBlbHNlIGlmIChzZXR0aW5ncy5za2lwVG9wTGV2ZWwpIHtcbiAgICAgICAgcHJldmlvdXNMZXZlbCA9IDJcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNraXBwZWQgaGVhZGluZ3NcbiAgICBpZiAoc2V0dGluZ3Muc2tpcEhlYWRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChoZWFkaW5nLmhlYWRpbmcuZW5kc1dpdGgoc2V0dGluZ3Muc2tpcEhlYWRpbmdzKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkanVzdCBudW1iZXJpbmcgc3RhY2tcbiAgICBpZiAobGV2ZWwgPT09IHByZXZpb3VzTGV2ZWwpIHtcbiAgICAgIGNvbnN0IHggPSBudW1iZXJpbmdTdGFjay5wb3AoKVxuICAgICAgaWYgKHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBudW1iZXJpbmdTdGFjay5wdXNoKG5leHROdW1iZXJpbmdUb2tlbih4KSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxldmVsIDwgcHJldmlvdXNMZXZlbCkge1xuICAgICAgZm9yIChsZXQgaSA9IHByZXZpb3VzTGV2ZWw7IGkgPiBsZXZlbDsgaS0tKSB7XG4gICAgICAgIG51bWJlcmluZ1N0YWNrLnBvcCgpXG4gICAgICB9XG4gICAgICBjb25zdCB4ID0gbnVtYmVyaW5nU3RhY2sucG9wKClcbiAgICAgIGlmICh4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbnVtYmVyaW5nU3RhY2sucHVzaChuZXh0TnVtYmVyaW5nVG9rZW4oeCkpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChsZXZlbCA+IHByZXZpb3VzTGV2ZWwpIHtcbiAgICAgIGZvciAobGV0IGkgPSBwcmV2aW91c0xldmVsOyBpIDwgbGV2ZWw7IGkrKykge1xuICAgICAgICBudW1iZXJpbmdTdGFjay5wdXNoKGZpcnN0TnVtYmVyaW5nVG9rZW5JblN0eWxlKHNldHRpbmdzLnN0eWxlTGV2ZWxPdGhlcikpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBwcmV2aW91cyBsZXZlbCB0byB0aGlzIGxldmVsIGZvciB0aGUgbmV4dCBpdGVyYXRpb25cbiAgICBwcmV2aW91c0xldmVsID0gbGV2ZWxcblxuICAgIGlmIChsZXZlbCA+IHNldHRpbmdzLm1heExldmVsKSB7XG4gICAgICAvLyBJZiB3ZSBhcmUgYWJvdmUgdGhlIG1heCBsZXZlbCwganVzdCBkb24ndCBudW1iZXIgaXRcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgcmFuZ2UgdG8gcmVwbGFjZSwgYW5kIHRoZW4gZG8gaXRcbiAgICBjb25zdCBwcmVmaXhSYW5nZSA9IGZpbmRIZWFkaW5nUHJlZml4UmFuZ2UoZWRpdG9yLCBoZWFkaW5nLCBzdXBwb3J0RmxhZ3MpXG4gICAgaWYgKHByZWZpeFJhbmdlID09PSB1bmRlZmluZWQpIHJldHVyblxuICAgIGNvbnN0IGhlYWRpbmdIYXNoU3RyaW5nID0gbWFrZUhlYWRpbmdIYXNoU3RyaW5nKGVkaXRvciwgaGVhZGluZylcbiAgICBpZiAoaGVhZGluZ0hhc2hTdHJpbmcgPT09IHVuZGVmaW5lZCkgcmV0dXJuXG4gICAgY29uc3QgcHJlZml4U3RyaW5nID0gbWFrZU51bWJlcmluZ1N0cmluZyhudW1iZXJpbmdTdGFjaylcbiAgICByZXBsYWNlUmFuZ2VFY29ub21pY2FsbHkoZWRpdG9yLCBjaGFuZ2VzLCBwcmVmaXhSYW5nZSwgaGVhZGluZ0hhc2hTdHJpbmcgKyBwcmVmaXhTdHJpbmcgKyBzZXR0aW5ncy5zZXBhcmF0b3IgKyAnICcpXG4gIH1cblxuICAvLyBFeGVjdXRlIHRoZSB0cmFuc2FjdGlvbiB0byBtYWtlIGFsbCB0aGUgY2hhbmdlcyBhdCBvbmNlXG4gIGlmIChjaGFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUubG9nKCdOdW1iZXIgSGVhZGluZ3MgUGx1Z2luOiBBcHBseWluZyBoZWFkaW5ncyBudW1iZXJpbmcgY2hhbmdlczonLCBjaGFuZ2VzLmxlbmd0aClcbiAgICBlZGl0b3IudHJhbnNhY3Rpb24oe1xuICAgICAgY2hhbmdlczogY2hhbmdlc1xuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVRhYmxlT2ZDb250ZW50cyA9IChcbiAgdmlld0luZm86IFZpZXdJbmZvIHwgdW5kZWZpbmVkLFxuICBzZXR0aW5nczogTnVtYmVySGVhZGluZ3NQbHVnaW5TZXR0aW5nc1xuKTogdm9pZCA9PiB7XG4gIGlmICghdmlld0luZm8pIHJldHVyblxuICBjb25zdCBoZWFkaW5ncyA9IHZpZXdJbmZvLmRhdGEuaGVhZGluZ3MgPz8gW11cbiAgY29uc3QgZWRpdG9yID0gdmlld0luZm8uZWRpdG9yXG5cbiAgaWYgKCFpc05vbkVtcHR5QmxvY2tJZChzZXR0aW5ncy5jb250ZW50cykpIHJldHVyblxuXG4gIGxldCB0b2NIZWFkaW5nOiBIZWFkaW5nQ2FjaGUgfCB1bmRlZmluZWRcbiAgbGV0IHRvY0J1aWxkZXIgPSAnXFxuJ1xuICBjb25zdCBjaGFuZ2VzOiBFZGl0b3JDaGFuZ2VbXSA9IFtdXG5cbiAgLy8gSW4gY2FzZSBoZWFkaW5ncyBzdGFydCBhYm92ZSBsZXZlbCAxLCB3ZSBkb24ndCB3YW50IHRvIGluZGVudCB0aGUgYnVsbGV0cyB0b28gbXVjaFxuICBsZXQgaW5pdGlhbEhlYWRpbmdMZXZlbCA9IDFcbiAgaWYgKGhlYWRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICBpbml0aWFsSGVhZGluZ0xldmVsID0gaGVhZGluZ3NbMF0ubGV2ZWxcbiAgfVxuXG4gIGZvciAoY29uc3QgaGVhZGluZyBvZiBoZWFkaW5ncykge1xuICAgIC8vIE9SREVSSU5HOiBJbXBvcnRhbnQgdG8gZmluZCB0aGUgVE9DIGhlYWRpbmcgYmVmb3JlIHNraXBwaW5nIHNraXBwZWQgaGVhZGluZ3MsIHNpbmNlIHRoYXQgaXMgZm9yIG51bWJlcmluZ1xuXG4gICAgLy8gRmluZCB0aGUgVE9DIGhlYWRpbmdcbiAgICBpZiAoaGVhZGluZy5oZWFkaW5nLmVuZHNXaXRoKHNldHRpbmdzLmNvbnRlbnRzKSkge1xuICAgICAgdG9jSGVhZGluZyA9IGhlYWRpbmdcbiAgICB9XG5cbiAgICAvKiBUaGlzIGNvZGUgbGV0cyB1cyBza2lwIFRPQyBsaW5lcyBmb3Igc2tpcHBlZCBoZWFkaW5ncywgYnV0IGRvZXNuJ3Qgd29yayB3ZWxsIHdpdGggZmlyc3QtbGV2ZWwgc2V0dGluZ1xuICAgIGlmICgoc2V0dGluZ3Muc2tpcFRvcExldmVsICYmIGhlYWRpbmcubGV2ZWwgPT09IDEpIHx8IChoZWFkaW5nLmxldmVsID4gc2V0dGluZ3MubWF4TGV2ZWwpKSB7XG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICAqL1xuXG4gICAgY29uc3QgdG9jRW50cnkgPSBjcmVhdGVUb2NFbnRyeShoZWFkaW5nLCBzZXR0aW5ncywgaW5pdGlhbEhlYWRpbmdMZXZlbClcbiAgICB0b2NCdWlsZGVyICs9IHRvY0VudHJ5ICsgJ1xcbidcbiAgfVxuXG4gIC8vIEluc2VydCB0aGUgZ2VuZXJhdGVkIHRhYmxlIG9mIGNvbnRlbnRzXG4gIGlmICh0b2NIZWFkaW5nKSB7XG4gICAgY29uc3QgZnJvbSA9IHtcbiAgICAgIGxpbmU6IHRvY0hlYWRpbmcucG9zaXRpb24uc3RhcnQubGluZSArIDEsXG4gICAgICBjaDogMFxuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGVuZCBvZiB0aGUgVE9DIHNlY3Rpb25cbiAgICBjb25zdCBzdGFydGluZ0xpbmUgPSB0b2NIZWFkaW5nLnBvc2l0aW9uLnN0YXJ0LmxpbmUgKyAxXG4gICAgbGV0IGVuZGluZ0xpbmUgPSBzdGFydGluZ0xpbmVcbiAgICBsZXQgZm91bmRMaXN0ID0gZmFsc2VcbiAgICBjb25zdCBsYXN0TGluZUluRWRpdG9yID0gZWRpdG9yLmxhc3RMaW5lKClcbiAgICBmb3IgKDsgOyBlbmRpbmdMaW5lKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShlbmRpbmdMaW5lKVxuICAgICAgaWYgKGxpbmUgPT09IHVuZGVmaW5lZCB8fCBlbmRpbmdMaW5lID4gbGFzdExpbmVJbkVkaXRvcikge1xuICAgICAgICAvLyBSZWFjaGVkIGVuZCBvZiBmaWxlLCBpbnNlcnQgYXQgdGhlIHN0YXJ0IG9mIHRoZSBUT0Mgc2VjdGlvblxuICAgICAgICBlbmRpbmdMaW5lID0gc3RhcnRpbmdMaW5lXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjb25zdCB0cmltbWVkTGluZVRleHQgPSBsaW5lLnRyaW1TdGFydCgpXG4gICAgICBpZiAoZm91bmRMaXN0KSB7XG4gICAgICAgIGlmICghdHJpbW1lZExpbmVUZXh0LnN0YXJ0c1dpdGgoVE9DX0xJU1RfSVRFTV9CVUxMRVQpKSBicmVha1xuICAgICAgICBpZiAodHJpbW1lZExpbmVUZXh0LnN0YXJ0c1dpdGgoJyMnKSkgYnJlYWtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0cmltbWVkTGluZVRleHQuc3RhcnRzV2l0aChUT0NfTElTVF9JVEVNX0JVTExFVCkpIHtcbiAgICAgICAgICBmb3VuZExpc3QgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAodHJpbW1lZExpbmVUZXh0LnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgIC8vIFJlYWNoZWQgdGhlIG5leHQgaGVhZGluZyB3aXRob3V0IGZpbmRpbmcgZXhpc3RpbmcgVE9DIGxpc3QsIGluc2VydCBhdCB0aGUgc3RhcnQgb2YgdGhlIFRPQyBzZWN0aW9uXG4gICAgICAgICAgZW5kaW5nTGluZSA9IHN0YXJ0aW5nTGluZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0b2NCdWlsZGVyID09PSAnXFxuJykge1xuICAgICAgdG9jQnVpbGRlciA9ICcnXG4gICAgfVxuXG4gICAgY29uc3QgdG8gPSB7XG4gICAgICBsaW5lOiBlbmRpbmdMaW5lLFxuICAgICAgY2g6IDBcbiAgICB9XG4gICAgY29uc3QgcmFuZ2UgPSB7IGZyb20sIHRvIH1cbiAgICByZXBsYWNlUmFuZ2VFY29ub21pY2FsbHkoZWRpdG9yLCBjaGFuZ2VzLCByYW5nZSwgdG9jQnVpbGRlcilcbiAgfVxuXG4gIC8vIEV4ZWN1dGUgdGhlIHRyYW5zYWN0aW9uIHRvIG1ha2UgYWxsIHRoZSBjaGFuZ2VzIGF0IG9uY2VcbiAgaWYgKGNoYW5nZXMubGVuZ3RoID4gMCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2coJ051bWJlciBIZWFkaW5ncyBQbHVnaW46IEFwcGx5aW5nIHRhYmxlIG9mIGNvbnRlbnRzIGNoYW5nZXM6JywgY2hhbmdlcy5sZW5ndGgpXG4gICAgZWRpdG9yLnRyYW5zYWN0aW9uKHtcbiAgICAgIGNoYW5nZXM6IGNoYW5nZXNcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCByZW1vdmVIZWFkaW5nTnVtYmVyaW5nID0gKFxuICB2aWV3SW5mbzogVmlld0luZm8gfCB1bmRlZmluZWRcbik6IHZvaWQgPT4ge1xuICBpZiAoIXZpZXdJbmZvKSByZXR1cm5cbiAgY29uc3QgaGVhZGluZ3MgPSB2aWV3SW5mby5kYXRhLmhlYWRpbmdzID8/IFtdXG4gIGNvbnN0IGVkaXRvciA9IHZpZXdJbmZvLmVkaXRvclxuXG4gIGNvbnN0IGNoYW5nZXM6IEVkaXRvckNoYW5nZVtdID0gW11cblxuICBmb3IgKGNvbnN0IGhlYWRpbmcgb2YgaGVhZGluZ3MpIHtcbiAgICBjb25zdCBwcmVmaXhSYW5nZSA9IGZpbmRIZWFkaW5nUHJlZml4UmFuZ2UoZWRpdG9yLCBoZWFkaW5nLCB7IGFscGhhYmV0OiB0cnVlLCByb21hbjogdHJ1ZSB9KVxuICAgIGlmIChwcmVmaXhSYW5nZSA9PT0gdW5kZWZpbmVkKSByZXR1cm5cbiAgICBjb25zdCBoZWFkaW5nSGFzaFN0cmluZyA9IG1ha2VIZWFkaW5nSGFzaFN0cmluZyhlZGl0b3IsIGhlYWRpbmcpXG4gICAgaWYgKGhlYWRpbmdIYXNoU3RyaW5nID09PSB1bmRlZmluZWQpIHJldHVyblxuICAgIHJlcGxhY2VSYW5nZUVjb25vbWljYWxseShlZGl0b3IsIGNoYW5nZXMsIHByZWZpeFJhbmdlLCBoZWFkaW5nSGFzaFN0cmluZyArICcgJylcbiAgfVxuXG4gIGlmIChjaGFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICBlZGl0b3IudHJhbnNhY3Rpb24oe1xuICAgICAgY2hhbmdlczogY2hhbmdlc1xuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nXHJcbmltcG9ydCB7IGdldFZpZXdJbmZvLCBpc1ZpZXdBY3RpdmUgfSBmcm9tICcuL2FjdGl2ZVZpZXdIZWxwZXJzJ1xyXG5pbXBvcnQgeyBnZXRGcm9udE1hdHRlclNldHRpbmdzT3JBbHRlcm5hdGl2ZSwgc2F2ZVNldHRpbmdzVG9Gcm9udE1hdHRlciB9IGZyb20gJy4vZnJvbnRNYXR0ZXInXHJcbmltcG9ydCB7IHNob3dOdW1iZXJpbmdEb25lTWVzc2FnZSB9IGZyb20gJy4vbWVzc2FnZXMnXHJcbmltcG9ydCB7IHJlbW92ZUhlYWRpbmdOdW1iZXJpbmcsIHVwZGF0ZUhlYWRpbmdOdW1iZXJpbmcsIHVwZGF0ZVRhYmxlT2ZDb250ZW50cyB9IGZyb20gJy4vbnVtYmVyaW5nJ1xyXG5pbXBvcnQgeyBOdW1iZXJpbmdTdHlsZSB9IGZyb20gJy4vbnVtYmVyaW5nVG9rZW5zJ1xyXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBOdW1iZXJIZWFkaW5nc1BsdWdpblNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5nc1R5cGVzJ1xyXG5cclxuY2xhc3MgTnVtYmVySGVhZGluZ3NQbHVnaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBOdW1iZXJIZWFkaW5nc1BsdWdpblxyXG5cclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBOdW1iZXJIZWFkaW5nc1BsdWdpbikge1xyXG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pXHJcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG4gIH1cclxuXHJcbiAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXNcclxuXHJcbiAgICBjb250YWluZXJFbC5lbXB0eSgpXHJcblxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTnVtYmVyIEhlYWRpbmdzIC0gU2V0dGluZ3MnIH0pXHJcblxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1RvIGFkZCBudW1iZXJpbmcgdG8geW91ciBkb2N1bWVudCwgYnJpbmcgdXAgdGhlIGNvbW1hbmQgd2luZG93IChvbiBNYWMsIHR5cGUgQ01EK1ApLCBhbmQgdGhlbiB0eXBlIFwiTnVtYmVyIEhlYWRpbmdzXCIgdG8gc2VlIGEgbGlzdCBvZiBhdmFpbGFibGUgY29tbWFuZHMuJyB9KVxyXG5cclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdicicsIHt9KVxyXG5cclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdJZiB0aGUgZG9jdW1lbnQgaGFzIGZyb250IG1hdHRlciBkZWZpbmVkIHdpdGggdGhlIGJlbG93IHNldHRpbmdzLCB0aGUgcHJvamVjdC13aWRlIHNldHRpbmdzIGRlZmluZWQgb24gdGhpcyBzY3JlZW4gd2lsbCBiZSBpZ25vcmVkLiBZb3UgY2FuIGRlZmluZSBmcm9udCBtYXR0ZXIgbGlrZSB0aGlzOicgfSlcclxuXHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgncHJlJywge1xyXG4gICAgICB0ZXh0OiBgICAgIC0tLVxyXG4gICAgYWxpYXM6XHJcbiAgICAtIEV4YW1wbGUgQWxpYXNcclxuICAgIHRhZ3M6XHJcbiAgICAtIGV4YW1wbGUtdGFnXHJcbiAgICBudW1iZXIgaGVhZGluZ3M6IGZpcnN0LWxldmVsIDEsIHN0YXJ0LWF0IDIsIG1heCA2LCAxLjEsIGF1dG8sIGNvbnRlbnRzIF50b2NcclxuICAgIC0tLWBcclxuICAgIH0pXHJcblxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgdGV4dDogYFxyXG4gICAgICBUaGUgJ251bWJlciBoZWFkaW5ncycgZnJvbnQgbWF0dGVyIGtleSBpcyB1c2VkIHRvIHN0b3JlIG51bWJlcmluZyBzZXR0aW5ncyBzcGVjaWZpYyB0byB0aGUgZmlsZS4gVGhlcmUgYXJlIGZvdXIgcG9zc2libGUgb3B0aW9uc1xyXG4gICAgICBpbiB0aGUgdmFsdWUgdG8gdGhlIHJpZ2h0IG9mIHRoZSBjb2xvbiwgc2VwYXJhdGVkIGJ5IGNvbW1hcy5cclxuICAgIGBcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgdWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgndWwnLCB7fSlcclxuXHJcbiAgICBjb25zdCBsaTAgPSB1bC5jcmVhdGVFbCgnbGknLCB7fSlcclxuICAgIGxpMC5jcmVhdGVFbCgnYicsIHsgdGV4dDogJ0F1dG9tYXRpYyBudW1iZXJpbmcnIH0pXHJcbiAgICBsaTAuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICc6IElmIFxcJ2F1dG9cXCcgYXBwZWFycywgdGhlIGRvY3VtZW50IHdpbGwgYmUgYXV0b21hdGljYWxseSBudW1iZXJlZC4nIH0pXHJcblxyXG4gICAgY29uc3QgbGkxID0gdWwuY3JlYXRlRWwoJ2xpJywge30pXHJcbiAgICBsaTEuY3JlYXRlRWwoJ2InLCB7IHRleHQ6ICdGaXJzdCBsZXZlbCB0byBudW1iZXInIH0pXHJcbiAgICBsaTEuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICc6IElmIFxcJ2ZpcnN0LWxldmVsIDJcXCcgYXBwZWFycywgdGhlIG51bWJlcmluZyB3aWxsIHN0YXJ0IGF0IHRoZSBzZWNvbmQgbGV2ZWwnIH0pXHJcblxyXG4gICAgY29uc3QgbGkyID0gdWwuY3JlYXRlRWwoJ2xpJywge30pXHJcbiAgICBsaTIuY3JlYXRlRWwoJ2InLCB7IHRleHQ6ICdTdGFydCBudW1iZXJpbmcgZmlyc3QgaGVhZGluZyBhdCcgfSlcclxuICAgIGxpMi5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJzogSWYgXFwnc3RhcnQtYXQgQ1xcJyBhcHBlYXJzLCB0aGUgbnVtYmVyaW5nIG9mIHRoZSBmaXJzdCBsZXZlbCB3aWxsIHN0YXJ0IGF0IEMsIGluc3RlYWQgb2YgQScgfSlcclxuXHJcbiAgICBjb25zdCBsaTMgPSB1bC5jcmVhdGVFbCgnbGknLCB7fSlcclxuICAgIGxpMy5jcmVhdGVFbCgnYicsIHsgdGV4dDogJ01heGltdW0gbGV2ZWwgdG8gbnVtYmVyJyB9KVxyXG4gICAgbGkzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnOiBJZiBcXCdtYXggNlxcJyBhcHBlYXJzLCB0aGUgaGVhZGluZ3MgYWJvdmUgbGV2ZWwgNiB3aWxsIGJlIHNraXBwZWQuJyB9KVxyXG5cclxuICAgIGNvbnN0IGxpNCA9IHVsLmNyZWF0ZUVsKCdsaScsIHt9KVxyXG4gICAgbGk0LmNyZWF0ZUVsKCdiJywgeyB0ZXh0OiAnVGFibGUgb2YgY29udGVudHMgYW5jaG9yJyB9KVxyXG4gICAgbGk0LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnOiBJZiBcXCdjb250ZW50cyBedG9jXFwnIGFwcGVhcnMsIHRoZSBoZWFkaW5nIHRoYXQgZW5kcyB3aXRoIHRoZSBhbmNob3IgXnRvYyB3aWxsIGhhdmUgYSB0YWJsZSBvZiBjb250ZW50cyBpbnNlcnRlZCBiZW5lYXRoIGl0LicgfSlcclxuXHJcbiAgICBjb25zdCBsaTQxID0gdWwuY3JlYXRlRWwoJ2xpJywge30pXHJcbiAgICBsaTQxLmNyZWF0ZUVsKCdiJywgeyB0ZXh0OiAnU2tpcCBoZWFkaW5ncyBhbmNob3InIH0pXHJcbiAgICBsaTQxLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnOiBJZiBcXCdza2lwIF5za2lwcGVkXFwnIGFwcGVhcnMsIHRoZSBoZWFkaW5nIHRoYXQgZW5kcyB3aXRoIHRoZSBhbmNob3IgXnNraXBwZWQgd2lsbCBub3QgYmUgbnVtYmVyZWQuJyB9KVxyXG5cclxuICAgIGNvbnN0IGxpNSA9IHVsLmNyZWF0ZUVsKCdsaScsIHt9KVxyXG4gICAgbGk1LmNyZWF0ZUVsKCdiJywgeyB0ZXh0OiAnTnVtYmVyaW5nIHN0eWxlJyB9KVxyXG4gICAgbGk1LmNyZWF0ZUVsKCdzcGFuJywge1xyXG4gICAgICB0ZXh0OiBgOlxyXG4gICAgICBBIHN0eWxlIHRleHQgbGlrZSAnMS4xJywgJ0EuMScsIG9yICdfLjEuMScgdGVsbHMgdGhlIHBsdWdpbiBob3cgdG8gZm9ybWF0IHRoZSBoZWFkaW5ncy5cclxuICAgICAgSWYgYSBzdHlsZSBzdHJpbmcgZW5kcyB3aXRoICcuJyAoYSBkb3QpLCAnOicgKGEgY29sb24pLCAnLScgKGEgZGFzaCksICfigJQnIChhbiBlbWRhc2gpLCBvciAnKScgKGEgcmlnaHQgcGFyZW50aGVzaXMpLCB0aGUgaGVhZGluZyBudW1iZXJzIHdpbGwgYmUgc2VwYXJhdGVkIGZyb20gdGhlIGhlYWRpbmcgdGl0bGVcclxuICAgICAgd2l0aCB0aGF0IHN5bWJvbC5gXHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnN0IHVsMyA9IGxpNS5jcmVhdGVFbCgndWwnLCB7fSlcclxuICAgIHVsMy5jcmVhdGVFbCgnbGknLCB7XHJcbiAgICAgIHRleHQ6IGAgICAgICBcclxuICAgICAgRm9yIGV4YW1wbGUsICcxLjEnIG1lYW5zIGJvdGggdG9wIGxldmVsIGFuZCBvdGhlciBoZWFkaW5ncyB3aWxsIGJlIG51bWJlcmVkIHN0YXJ0aW5nIGZyb20gJzEnLlxyXG4gICAgYFxyXG4gICAgfSlcclxuICAgIHVsMy5jcmVhdGVFbCgnbGknLCB7XHJcbiAgICAgIHRleHQ6IGAgICAgICBcclxuICAgICAgRm9yIGV4YW1wbGUsICdBLjEnIG1lYW5zIHRvcCBsZXZlbCBoZWFkaW5ncyB3aWxsIGJlIG51bWJlcmVkIHN0YXJ0aW5nIGZyb20gJ0EnLlxyXG4gICAgYFxyXG4gICAgfSlcclxuICAgIHVsMy5jcmVhdGVFbCgnbGknLCB7XHJcbiAgICAgIHRleHQ6IGAgICAgICBcclxuICAgICAgRm9yIGV4YW1wbGUsICdfLkEuMScgbWVhbnMgdG9wIGxldmVsIGhlYWRpbmdzIHdpbGwgTk9UIGJlIG51bWJlcmVkLCBidXQgdGhlIG5leHQgbGV2ZWxzIHdpbGwgYmUgbnVtYmVyZWQgd2l0aCBsZXR0ZXJzIGFuZCBudW1iZXJzLlxyXG4gICAgYFxyXG4gICAgfSlcclxuICAgIHVsMy5jcmVhdGVFbCgnbGknLCB7XHJcbiAgICAgIHRleHQ6IGAgICAgICBcclxuICAgICAgRm9yIGV4YW1wbGUsICcxLjE6JyBtZWFucyBoZWFkaW5ncyB3aWxsIGxvb2sgbGlrZSAnIyMgMi40OiBFeGFtcGxlIEhlYWRpbmcnXHJcbiAgICBgXHJcbiAgICB9KVxyXG4gICAgdWwzLmNyZWF0ZUVsKCdsaScsIHtcclxuICAgICAgdGV4dDogYCAgICAgIFxyXG4gICAgICBGb3IgZXhhbXBsZSwgJ0EuMS0nIG1lYW5zIGhlYWRpbmdzIHdpbGwgbG9vayBsaWtlICcjIyBCLjUtIEV4YW1wbGUgSGVhZGluZydcclxuICAgIGBcclxuICAgIH0pXHJcbiAgICB1bDMuY3JlYXRlRWwoJ2xpJywge1xyXG4gICAgICB0ZXh0OiBgICAgICAgXHJcbiAgICAgIEZvciBleGFtcGxlLCAnSS5BIOKAlCcgbWVhbnMgaGVhZGluZ3Mgd2lsbCBsb29rIGxpa2UgJyMjIElWLkEg4oCUIEV4YW1wbGUgSGVhZGluZycgKHdpdGggUm9tYW4gbnVtZXJhbHMpXHJcbiAgICBgXHJcbiAgICB9KVxyXG5cclxuICAgIGNvbnN0IGxpMTAwID0gdWwuY3JlYXRlRWwoJ2xpJywge30pXHJcbiAgICBsaTEwMC5jcmVhdGVFbCgnYicsIHsgdGV4dDogJ051bWJlcmluZyBvZmYnIH0pXHJcbiAgICBsaTEwMC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJzogSWYgXFwnb2ZmXFwnIGFwcGVhcnMsIHRoZSBkb2N1bWVudCB3aWxsIG5vdCBiZSBudW1iZXJlZC4nIH0pXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdTa2lwIHRvcCBoZWFkaW5nIGxldmVsJylcclxuICAgICAgLnNldERlc2MoJ0lmIHNlbGVjdGVkLCBudW1iZXJpbmcgd2lsbCBub3QgYmUgYXBwbGllZCB0byB0aGUgdG9wIGhlYWRpbmcgbGV2ZWwuJylcclxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNraXBUb3BMZXZlbClcclxuICAgICAgICAuc2V0VG9vbHRpcCgnU2tpcCB0b3AgaGVhZGluZyBsZXZlbCcpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2tpcFRvcExldmVsID0gdmFsdWVcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcbiAgICAgICAgfSkpXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdGaXJzdCBoZWFkaW5nIGxldmVsJylcclxuICAgICAgLnNldERlc2MoJ0ZpcnN0IGhlYWRpbmcgbGV2ZWwgdG8gbnVtYmVyLicpXHJcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgIC5zZXRMaW1pdHMoMSwgNiwgMSlcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlyc3RMZXZlbClcclxuICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0TGV2ZWwgPSB2YWx1ZVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuICAgICAgICB9KSlcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1N0YXJ0IG51bWJlcmluZyBhdCcpXHJcbiAgICAgIC5zZXREZXNjKCdTdGFydCBudW1iZXJpbmcgdGhlIGZpcnN0IGhlYWRpbmcgbGV2ZWwgZnJvbSB0aGlzIHZhbHVlLicpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGFydEF0KVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN0YXJ0QXQgPSB2YWx1ZVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuICAgICAgICB9KSlcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ01heGltdW0gaGVhZGluZyBsZXZlbCcpXHJcbiAgICAgIC5zZXREZXNjKCdNYXhpbXVtIGhlYWRpbmcgbGV2ZWwgdG8gbnVtYmVyLicpXHJcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgIC5zZXRMaW1pdHMoMSwgNiwgMSlcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4TGV2ZWwpXHJcbiAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhMZXZlbCA9IHZhbHVlXHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG4gICAgICAgIH0pKVxyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnU3R5bGUgZm9yIGxldmVsIDEgaGVhZGluZ3MnKVxyXG4gICAgICAuc2V0RGVzYygnRGVmaW5lcyB0aGUgbnVtYmVyaW5nIHN0eWxlIGZvciBsZXZlbCBvbmUgaGVhZGluZ3MuIFZhbGlkIHZhbHVlcyBhcmUgMSAoZm9yIG51bWJlcnMpIG9yIEEgKGZvciBjYXBpdGFsIGxldHRlcnMpIG9yIEkgKGZvciBSb21hbiBudW1lcmFscykuJylcclxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0eWxlTGV2ZWwxKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN0eWxlTGV2ZWwxID0gdmFsdWUgYXMgTnVtYmVyaW5nU3R5bGVcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcbiAgICAgICAgfSkpXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdTdHlsZSBmb3IgbG93ZXIgbGV2ZWwgaGVhZGluZ3MgKGJlbG93IGxldmVsIDEpJylcclxuICAgICAgLnNldERlc2MoJ0RlZmluZXMgdGhlIG51bWJlcmluZyBzdHlsZSBmb3IgaGVhZGluZ3MgYmVsb3cgbGV2ZWwgb25lLiBWYWxpZCB2YWx1ZXMgYXJlIDEgKGZvciBudW1iZXJzKSBvciBBIChmb3IgY2FwaXRhbCBsZXR0ZXJzKSBvciBJIChmb3IgUm9tYW4gbnVtZXJhbHMpLicpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdHlsZUxldmVsT3RoZXIpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3R5bGVMZXZlbE90aGVyID0gdmFsdWUgYXMgTnVtYmVyaW5nU3R5bGVcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcbiAgICAgICAgfSkpXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdBdXRvbWF0aWMgbnVtYmVyaW5nJylcclxuICAgICAgLnNldERlc2MoJ1R1cm5zIG9uIGF1dG9tYXRpYyBudW1iZXJpbmcgb2YgZG9jdW1lbnRzLicpXHJcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvKVxyXG4gICAgICAgIC5zZXRUb29sdGlwKCdUdXJuIG9uIGF1dG9tYXRpYyBudW1iZXJpbmcnKVxyXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG8gPSB2YWx1ZVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuICAgICAgICB9KSlcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1NlcGFyYXRvciBzdHlsZScpXHJcbiAgICAgIC5zZXREZXNjKCdEZWZpbmVzIHRoZSBzZXBhcmF0b3Igc3R5bGUgYmV0d2VlbiB0aGUgaGVhZGluZyBudW1iZXIgYW5kIHRoZSBoZWFkaW5nIHRleHQuIFZhbGlkIHZhbHVlcyBhcmUgOiAoY29sb24pIG9yIC4gKGRvdCkgb3IgLSAoZGFzaCkgb3Ig4oCUIChlbWRhc2gpIG9yICkgKGEgcmlnaHQgcGFyZW50aGVzaXMpLiBZb3UgY2FuIGFsc28gbGVhdmUgaXQgYmxhbmsgZm9yIG5vIHNlcGFyYXRvciwgb3IgaGF2ZSBhIHNwYWNlIGJlZm9yZSB0aGUgc2VwYXJhdG9yLicpXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0b3IpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdG9yID0gdmFsdWVcclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcbiAgICAgICAgfSkpXHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdUYWJsZSBvZiBDb250ZW50cyBBbmNob3InKVxyXG4gICAgICAuc2V0RGVzYygnQW5jaG9yIHdoaWNoIGxhYmVscyB0aGUgaGVhZGVyIHdoZXJlIGEgdGFibGUgb2YgY29udGVudHMgc2hvdWxkIGJlIGluc2VydGVkLiBUaGUgYW5jaG9yIHNob3VsZCBiZSBhZGRlZCBhdCB0aGUgZW5kIG9mIGEgaGVhZGVyLiBGb3IgZXhhbXBsZSwgXnRvYy4nKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudHMpXHJcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGVudHMgPSB2YWx1ZVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuICAgICAgICB9KSlcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1NraXAgSGVhZGluZ3MgQW5jaG9yJylcclxuICAgICAgLnNldERlc2MoJ0FuY2hvciB3aGljaCBsYWJlbHMgdGhlIGhlYWRlcnMgdGhhdCBzaG91bGQgbm90IGJlIG51bWJlcmVkLiBUaGUgYW5jaG9yIHNob3VsZCBiZSBhZGRlZCBhdCB0aGUgZW5kIG9mIGEgaGVhZGVyLiBGb3IgZXhhbXBsZSwgXnNraXBwZWQuJylcclxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNraXBIZWFkaW5ncylcclxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lwSGVhZGluZ3MgPSB2YWx1ZVxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuICAgICAgICB9KSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE51bWJlckhlYWRpbmdzUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICBzZXR0aW5ncyE6IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ3NcclxuXHJcbiAgYXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgIGNvbnNvbGUuaW5mbygnTG9hZGluZyBOdW1iZXIgSGVhZGluZ3MgUGx1Z2luLCB2ZXJzaW9uICcgKyB0aGlzLm1hbmlmZXN0LnZlcnNpb24pXHJcblxyXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKVxyXG5cclxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnbnVtYmVyLWhlYWRpbmdzLXdpdGgtb3B0aW9ucycsXHJcbiAgICAgIG5hbWU6ICdOdW1iZXIgYWxsIGhlYWRpbmdzIGluIGRvY3VtZW50IChhbmQgc2hvdyBvcHRpb25zKScsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGlmIChjaGVja2luZykgcmV0dXJuIGlzVmlld0FjdGl2ZSh0aGlzLmFwcClcclxuXHJcbiAgICAgICAgY29uc3Qgdmlld0luZm8gPSBnZXRWaWV3SW5mbyh0aGlzLmFwcClcclxuICAgICAgICBpZiAodmlld0luZm8pIHtcclxuICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gZ2V0RnJvbnRNYXR0ZXJTZXR0aW5nc09yQWx0ZXJuYXRpdmUodmlld0luZm8uZGF0YSwgdGhpcy5zZXR0aW5ncylcclxuICAgICAgICAgIGlmIChzZXR0aW5ncy5vZmYpIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgICAgIHVwZGF0ZUhlYWRpbmdOdW1iZXJpbmcodmlld0luZm8sIHNldHRpbmdzKVxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEhBQ0s6IFRoaXMgbXVzdCBoYXBwZW4gYWZ0ZXIgYSB0aW1lb3V0IHNvIHRoYXQgdGhlcmUgaXMgdGltZSBmb3IgdGhlIGVkaXRvciB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZVxyXG4gICAgICAgICAgICBjb25zdCBwb3N0TnVtYmVyaW5nVmlld0luZm8gPSBnZXRWaWV3SW5mbyh0aGlzLmFwcClcclxuICAgICAgICAgICAgdXBkYXRlVGFibGVPZkNvbnRlbnRzKHBvc3ROdW1iZXJpbmdWaWV3SW5mbywgc2V0dGluZ3MpXHJcbiAgICAgICAgICB9LCAzMDAwKVxyXG5cclxuICAgICAgICAgIHNob3dOdW1iZXJpbmdEb25lTWVzc2FnZSh0aGlzLmFwcCwgc2V0dGluZ3MpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ251bWJlci1oZWFkaW5ncycsXHJcbiAgICAgIG5hbWU6ICdOdW1iZXIgYWxsIGhlYWRpbmdzIGluIGRvY3VtZW50JyxcclxuICAgICAgY2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgaWYgKGNoZWNraW5nKSByZXR1cm4gaXNWaWV3QWN0aXZlKHRoaXMuYXBwKVxyXG5cclxuICAgICAgICBjb25zdCB2aWV3SW5mbyA9IGdldFZpZXdJbmZvKHRoaXMuYXBwKVxyXG4gICAgICAgIGlmICh2aWV3SW5mbykge1xyXG4gICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBnZXRGcm9udE1hdHRlclNldHRpbmdzT3JBbHRlcm5hdGl2ZSh2aWV3SW5mby5kYXRhLCB0aGlzLnNldHRpbmdzKVxyXG4gICAgICAgICAgaWYgKHNldHRpbmdzLm9mZikgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgICAgICAgdXBkYXRlSGVhZGluZ051bWJlcmluZyh2aWV3SW5mbywgc2V0dGluZ3MpXHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgLy8gSEFDSzogVGhpcyBtdXN0IGhhcHBlbiBhZnRlciBhIHRpbWVvdXQgc28gdGhhdCB0aGVyZSBpcyB0aW1lIGZvciB0aGUgZWRpdG9yIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3ROdW1iZXJpbmdWaWV3SW5mbyA9IGdldFZpZXdJbmZvKHRoaXMuYXBwKVxyXG4gICAgICAgICAgICB1cGRhdGVUYWJsZU9mQ29udGVudHMocG9zdE51bWJlcmluZ1ZpZXdJbmZvLCBzZXR0aW5ncylcclxuICAgICAgICAgIH0sIDMwMDApXHJcblxyXG4gICAgICAgICAgLy8gTk9URTogVGhlIGxpbmUgYmVsb3cgaXMgaW50ZW50aW9uYWxseSBjb21tZW50ZWQgb3V0LCBzaW5jZSB0aGlzIGNvbW1hbmQgaXMgdGhlIHNhbWUgYXNcclxuICAgICAgICAgIC8vICAgICAgIHRoZSBhYm92ZSBjb21tYW5kLCBleGNlcHQgZm9yIHRoaXMgbGluZVxyXG4gICAgICAgICAgLy8gc2hvd051bWJlcmluZ0RvbmVNZXNzYWdlKHRoaXMuYXBwLCBzZXR0aW5ncywgdmlld0luZm8pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICBpZDogJ3JlbW92ZS1udW1iZXItaGVhZGluZ3MnLFxyXG4gICAgICBuYW1lOiAnUmVtb3ZlIG51bWJlcmluZyBmcm9tIGFsbCBoZWFkaW5ncyBpbiBkb2N1bWVudCcsXHJcbiAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGlmIChjaGVja2luZykgcmV0dXJuIGlzVmlld0FjdGl2ZSh0aGlzLmFwcClcclxuXHJcbiAgICAgICAgY29uc3Qgdmlld0luZm8gPSBnZXRWaWV3SW5mbyh0aGlzLmFwcClcclxuICAgICAgICByZW1vdmVIZWFkaW5nTnVtYmVyaW5nKHZpZXdJbmZvKVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgIGlkOiAnc2F2ZS1zZXR0aW5ncy10by1mcm9udC1tYXR0ZXInLFxyXG4gICAgICBuYW1lOiAnU2F2ZSBzZXR0aW5ncyB0byBmcm9udCBtYXR0ZXInLFxyXG4gICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBpZiAoY2hlY2tpbmcpIHJldHVybiBpc1ZpZXdBY3RpdmUodGhpcy5hcHApXHJcblxyXG4gICAgICAgIGNvbnN0IHZpZXdJbmZvID0gZ2V0Vmlld0luZm8odGhpcy5hcHApXHJcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKClcclxuICAgICAgICBpZiAodmlld0luZm8gJiYgZmlsZSkge1xyXG4gICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBnZXRGcm9udE1hdHRlclNldHRpbmdzT3JBbHRlcm5hdGl2ZSh2aWV3SW5mby5kYXRhLCB0aGlzLnNldHRpbmdzKVxyXG4gICAgICAgICAgc2F2ZVNldHRpbmdzVG9Gcm9udE1hdHRlcih0aGlzLmFwcC5maWxlTWFuYWdlciwgZmlsZSwgc2V0dGluZ3MpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IE51bWJlckhlYWRpbmdzUGx1Z2luU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpXHJcblxyXG4gICAgdGhpcy5yZWdpc3RlckludGVydmFsKHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHZpZXdJbmZvID0gZ2V0Vmlld0luZm8odGhpcy5hcHApXHJcbiAgICAgIGlmICh2aWV3SW5mbykge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gZ2V0RnJvbnRNYXR0ZXJTZXR0aW5nc09yQWx0ZXJuYXRpdmUodmlld0luZm8uZGF0YSwgdGhpcy5zZXR0aW5ncylcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLm9mZikgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5hdXRvKSB7XHJcbiAgICAgICAgICB1cGRhdGVIZWFkaW5nTnVtYmVyaW5nKHZpZXdJbmZvLCBzZXR0aW5ncylcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBIQUNLOiBUaGlzIG11c3QgaGFwcGVuIGFmdGVyIGEgdGltZW91dCBzbyB0aGF0IHRoZXJlIGlzIHRpbWUgZm9yIHRoZSBlZGl0b3IgdHJhbnNhY3Rpb24gdG8gY29tcGxldGVcclxuICAgICAgICAgICAgY29uc3QgcG9zdE51bWJlcmluZ1ZpZXdJbmZvID0gZ2V0Vmlld0luZm8odGhpcy5hcHApXHJcbiAgICAgICAgICAgIHVwZGF0ZVRhYmxlT2ZDb250ZW50cyhwb3N0TnVtYmVyaW5nVmlld0luZm8sIHNldHRpbmdzKVxyXG4gICAgICAgICAgfSwgMzAwMClcclxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTnVtYmVyIEhlYWRpbmdzIFBsdWdpbjogQXV0b21hdGljYWxseSBudW1iZXJlZCBkb2N1bWVudCcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCAxMCAqIDEwMDApKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSlcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncylcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1hcmtkb3duVmlldyIsInJvbWFuaXplIiwiZGVyb21hbml6ZSIsInBhcnNlRnJvbnRNYXR0ZXJFbnRyeSIsIk1vZGFsIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciLCJQbHVnaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFvR0E7QUFDTyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUU7QUFDN0QsSUFBSSxTQUFTLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxPQUFPLEtBQUssWUFBWSxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLFVBQVUsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7QUFDaEgsSUFBSSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDL0QsUUFBUSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO0FBQ25HLFFBQVEsU0FBUyxRQUFRLENBQUMs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
